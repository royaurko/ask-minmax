Motivated by the work of Vishik on the analytic torsion we introduce a new
class of generalized Atiyah-Patodi-Singer boundary value problems. We are able
to derive a full heat expansion for this class of operators generalizing
earlier work of Grubb and Seeley. As an application we give another proof of
the gluing formula for the eta invariant. Our class of boundary conditions
contains as special cases the usual (nonlocal) Atiyah-Patodi-Singer boundary
value problems as well as the (local) relative and absolute boundary conditions
for the Gauss-Bonnet operator.