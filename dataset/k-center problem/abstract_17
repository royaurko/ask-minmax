We use language theory to study the rational subset problem for groups and
monoids. We show that the decidability of this problem is preserved under graph
of groups constructions with finite edge groups. In particular, it passes
through free products amalgamated over finite subgroups and HNN extensions with
finite associated subgroups. We provide a simple proof of a result of
Grunschlag showing that the decidability of this problem is a virtual property.
We prove further that the problem is decidable for a direct product of a group
G with a monoid M if and only if membership is uniformly decidable for
G-automata subsets of M. It follows that a direct product of a free group with
any abelian group or commutative monoid has decidable rational subset
membership.