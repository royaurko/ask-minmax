Designing query languages for graph structured data is an active field of
research. Evaluating a query on a graph results in a relation on the set of its
nodes. In other words, a query is a mechanism for defining relations on a
graph. Some relations may not be definable by any query in a given language.
This leads to the following question: given a graph, a query language and a
relation on the graph, does there exist a query in the language that defines
the relation? This is called the definability problem. When the given query
language is standard regular expressions, the definability problem is known to
be PSPACE-complete.
  The model of graphs can be extended by labeling nodes with values from an
infinite domain. These labels induce a partition on the set of nodes: two nodes
are equivalent if they are labeled by the same value. Query languages can also
be extended to make use of this equivalence. Two such extensions are Regular
Expressions with Memory (REM) and Regular Expressions with Equality (REE).
  In this paper, we study the complexity of the definability problem in this
extended model when the query language is either REM or REE. We show that the
definability problem is EXPSPACE-complete when the query language is REM, and
it is PSPACE-complete when the query language is REE. In addition, when the
query language is a union of conjunctive queries based on REM or REE, we show
coNP-completeness.