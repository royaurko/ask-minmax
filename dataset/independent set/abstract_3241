In this paper we study the Omega risk model with surplus-dependent tax
payments in a time-homogeneous diffusion setting. The new model incorporates
practical features from both the Omega risk model(Albrecher and Gerber and Shiu
(2011)) and the risk model with tax(Albrecher and Hipp (2007)). We explicitly
characterize the Laplace transform of the occupation time of an Azema-Yor
process(e.g. a process refracted by functionals of its running maximum) below a
constant level until the first hitting time of another Azema-Yor process or
until an independent exponential time. This result unifies and extends recent
literature(Li and Zhou (2013) and Zhang (2014)) incorporating some of their
results as special cases. We explicitly characterize the Laplace transform of
the time of bankruptcy in the Omega risk model with tax and discuss an
extension to integral functionals. Finally we present examples using a Brownian
motion with drift.