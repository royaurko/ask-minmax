A method for calculating multi-portfolio time consistent multivariate risk
measures in discrete time is presented. Market models for $d$ assets with
transaction costs or illiquidity and possible trading constraints are
considered on a finite probability space. The set of capital requirements at
each time and state is calculated recursively backwards in time along the event
tree. We motivate why the proposed procedure can be seen as a set-valued
Bellman's principle, that might be of independent interest within the growing
field of set optimization. We give conditions under which the backwards
calculation of the sets reduces to solving a sequence of linear, respectively
convex vector optimization problems. Numerical examples are given and include
superhedging under illiquidity, the set-valued entropic risk measure, and the
multi-portfolio time consistent version of the relaxed worst case risk measure
and of the set-valued average value at risk.