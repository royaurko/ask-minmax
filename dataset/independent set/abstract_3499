We present a set of gas-dynamical simulations of galaxy groups and clusters
aimed at exploring the effect of non-gravitational heating. We use GASOLINE, a
parallel Tree+SPH code, to simulate the formation of four cosmic halos with
temperature 0.5<T<8 keV. Non-gravitational heating is implemented in two
different ways: (1) by imposing a minimum entropy floor at a given redshift,
1<z<5; (2) by gradually heating gas, proportionally to the SN rate expected
from semi-analytical modeling of galaxy formation. Our main results are the
following. (a) An extra heating energy of about 1 keV per gas particle is
required to reproduce the observed Lx-T relation, independent of whether it is
provided so as to create an entropy floor of 50-100 keV cm^2, or is modulated
in redshift; our SN feedback recipe provides only 1/3 keV/part. (b) The M-T
relation is almost unaffected by non-gravitational heating and follows the M
T^{3/2} scaling, with a normalization ~40% higher than observed, independent of
the heating scheme. The inclusion of cooling in a run of a small group has the
effects of increasing T_ew by ~30%, possibly reconciling simulated and observed
M-T relations, and of decreasing Lx by ~40%. In spite of the inclusion of SN
feedback energy, almost 40% of the gas becomes cold, in excess of current
observational estimates. (abridged)