This paper is concerned with the utility-based risk of a financial position
in a multi-asset market with frictions. Risk is quantified by set-valued risk
measures, and market frictions are modeled by conical/convex random solvency
regions representing proportional transaction costs or illiquidity effects, and
convex random sets representing trading constraints. First, with a general
set-valued risk measure, the effect of having trading opportunities on the risk
measure is considered, and a corresponding dual representation theorem is
given. Then, assuming individual utility functions for the assets,
utility-based shortfall and divergence risk measures are defined, which form
two classes of set-valued convex risk measures. Minimal penalty functions are
computed in terms of the vector versions of the well-known divergence
functionals (generalized relative entropy). As special cases, set-valued
versions of the entropic risk measure and the average value at risk are
obtained. The general results on the effect of market frictions are applied to
the utility-based framework and conditions concerning applicability are
presented.