We study billiard in the plane endowed with symmetric
\$\mathbb{Z}^2\$-periodic obstacles of a right-angled polygonal shape. One of
our main interests is the dependence of the diffusion rate of the billiard on
the shape of the obstacle. We prove, in particular, that when the number of
angles of a symmetric connected obstacle grows, the diffusion rate tends to
zero, thus answering a question of J.-C. Yoccoz.
  Our results are based on computation of Lyapunov exponents of the Hodge
bundle over hyperelliptic loci in the moduli spaces of quadratic differentials,
which represents independent interest. In particular, we compute the exact
value of the Lyapunov exponent \$\lambda^+_1\$ for all elliptic loci of
quadratic differentials with simple zeroes and poles.