A Lagrangian formalism is developed for a general nondissipative
quasiperiodic nonlinear wave with trapped particles in collisionless plasma.
The adiabatic time-averaged Lagrangian density $\mcc{L}$ is expressed in terms
of the single-particle oscillation-center Hamiltonians; once those are found,
the complete set of geometrical-optics equations is derived without referring
to the Maxwell-Vlasov system. The number of trapped particles is assumed fixed;
in particular, those may reside close to the bottom of the wave trapping
potential, so they never become untrapped. Then their contributions to the wave
momentum and the energy flux depend mainly on the trapped-particle density, as
an independent parameter, and the phase velocity rather than on the wave
amplitude $a$ explicitly; hence, $\mcc{L}$ acquires $a$-independent terms.
Also, the wave action is generally not conserved, because it can be exchanged
with resonant oscillations of the trapped-particle density. The corresponding
modification of the wave envelope equation is found explicitly, and the new
action flow velocity is derived. Applications of these results are left to the
other two papers of the series, where specific problems are addressed
pertaining to properties and dynamics of waves with trapped particles.