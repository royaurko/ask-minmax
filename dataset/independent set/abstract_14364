We study the following generalization of Roth's theorem for 3-term arithmetic
progressions. For s>1, define a nontrivial s-configuration to be a set of
s(s+1)/2 integers consisting of s distinct integers x_1,...,x_s as well as all
the averages (x_i+x_j)/2. Our main result states that if a set A contained in
{1,2,...,N} has density at least (log N)^{-c(s)} for some positive constant
c(s)>0 depending on s, then A contains a nontrivial s-configuration. We also
deduce, as a corollary, an improvement of a problem involving sumfree subsets.