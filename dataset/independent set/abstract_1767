The Press--Schechter, excursion set approach allows one to make predictions
about the shape and evolution of the mass function of bound objects. It
combines the assumption that objects collapse spherically with the assumption
that the initial density fluctuations were Gaussian and small. While the
predicted mass function is reasonably accurate at the high mass end, it has
more low mass objects than are seen in simulations of hierarchical clustering.
This discrepancy can be reduced substantially if bound structures are assumed
to form from an ellipsoidal, rather than a spherical collapse. In the spherical
model, a region collapses if the initial density within it exceeds a threshold
value, delta_sc. This value is independent of the initial size of the region,
and since the mass of the collapsed object is related to its initial size,
delta_sc is independent of final mass. In the ellipsoidal model, the collapse
of a region depends on the surrounding shear field, as well as on its initial
overdensity. Therefore, there is a relation between the density threshold value
required for collapse, and the mass of the final object. We provide a fitting
function to this delta_ec(m) relation for initially Gaussian fields which
simplifies the inclusion of ellipsoidal dynamics in the excursion set approach.
We discuss the relation between the excursion set predictions and the halo
distribution in high resolution N-body simulations, and show that our simple
parametrization of the ellipsoidal collapse model represents a significant
improvement on the spherical model on an object-by-object basis. Finally, we
show that the associated statistical predictions, the mass function and the
large scale halo-to-mass bias relation, are also more accurate than the
standard predictions.