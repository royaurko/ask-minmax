In this paper, we study the problem of allocating ads to users through the
viral-marketing lens. Advertisers approach the host with a budget in return for
the marketing campaign service provided by the host. We show that allocation
that takes into account the propensity of ads for viral propagation can achieve
significantly better performance. However, uncontrolled virality could be
undesirable for the host as it creates room for exploitation by the
advertisers: hoping to tap uncontrolled virality, an advertiser might declare a
lower budget for its marketing campaign, aiming at the same large outcome with
a smaller cost.
  This creates a challenging trade-off: on the one hand, the host aims at
leveraging virality and the network effect to improve advertising efficacy,
while on the other hand the host wants to avoid giving away free service due to
uncontrolled virality. We formalize this as the problem of ad allocation with
minimum regret, which we show is NP-hard and inapproximable w.r.t. any factor.
However, we devise an algorithm that provides approximation guarantees w.r.t.
the total budget of all advertisers. We develop a scalable version of our
approximation algorithm, which we extensively test on four real-world data
sets, confirming that our algorithm delivers high quality solutions, is
scalable, and significantly outperforms several natural baselines.