Motivated by recent increases in network traffic, we propose a decentralized
network edge-based solution to peak-hour broadband congestion that incentivizes
users to moderate their bandwidth demands to their actual needs. Our solution
is centered on smart home gateways that allocate bandwidth in a two-level
hierarchy: first, a gateway purchases guaranteed bandwidth from the Internet
Service Provider (ISP) with virtual credits. It then self-limits its bandwidth
usage and distributes the bandwidth among its apps and devices according to
their relative priorities. To this end, we design a credit allocation and
redistribution mechanism for the first level, and implement our gateways on
commodity wireless routers for the second level. We demonstrate our system's
effectiveness and practicality with theoretical analysis, simulations and
experiments on real traffic. Compared to a baseline equal sharing algorithm,
our solution significantly improves users' overall satisfaction and yields a
fair allocation of bandwidth across users.