This paper studies a very general urn model stimulated by designs in clinical
trials, where the number of balls of different types added to the urn at trial
n depends on a random outcome directed by the composition at trials
1,2,...,n-1. Patient treatments are allocated according to types of balls. We
establish the strong consistency and asymptotic normality for both the urn
composition and the patient allocation under general assumptions on random
generating matrices which determine how balls are added to the urn. Also we
obtain explicit forms of the asymptotic variance-covariance matrices of both
the urn composition and the patient allocation. The conditions on the
nonhomogeneity of generating matrices are mild and widely satisfied in
applications. Several applications are also discussed.