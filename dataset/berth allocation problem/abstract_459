Massive MIMO and small cell are both recognized as the key technologies for
the future 5G wireless systems. In this paper, we investigate the problem of
user association in a heterogeneous network (HetNet) with massive MIMO and
small cells, where the macro base station (BS) is equipped with a massive MIMO
and the picocell BS's are equipped with regular MIMOs. We first develop
centralized user association algorithms with proven optimality, considering
various objectives such as rate maximization, proportional fairness, and joint
user association and resource allocation. We then model the massive MIMO HetNet
as a repeated game, which leads to distributed user association algorithms with
proven convergence to the Nash Equilibrium (NE). We demonstrate the efficacy of
these optimal schemes by comparison with several greedy algorithms through
simulations.