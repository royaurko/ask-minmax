Recent experimental studies confirm the prevalence of the widely known
performance anomaly problem in current Wi-Fi networks, and report on the severe
network utility degradation caused by this phenomenon. Although a large body of
work addressed this issue, we attribute the refusal of prior solutions to their
poor implementation feasibility with off-the-shelf hardware and their imprecise
modelling of the 802.11 protocol. Their applicability is further challenged
today by very high throughput enhancements (802.11n/ac) whereby link speeds can
vary by two orders of magnitude. Unlike earlier approaches, in this paper we
introduce the first rigorous analytical model of 802.11 stations' throughput
and airtime in multi-rate settings, without sacrificing accuracy for
tractability. We use the proportional-fair allocation criterion to formulate
network utility maximisation as a convex optimisation problem for which we give
a closed-form solution. We present a fully functional light-weight
implementation of our scheme on commodity access points and evaluate this
extensively via experiments in a real deployment, over a broad range of network
conditions. Results demonstrate that our proposal achieves up to 100\% utility
gains, can double video streaming goodput and reduces TCP download times by 8x.