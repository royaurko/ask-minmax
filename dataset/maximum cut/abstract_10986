For any assumed stellar Initial Mass Function, the Sloan Digital Sky Survey
(SDSS) gives a precise determination of the stellar mass function of galaxies
for 10^8 M_sun < M_* < 10^12 M_sun. Within the concordance LCDM cosmology, the
Millennium simulations give a precise halo mass function for all halos within
which galaxies can form. Under the plausible hypothesis that the stellar mass
of a galaxy is an increasing function of the maximum mass ever attained by its
halo, these combine to give halo mass as a function of stellar mass. The result
agrees quite well with observational estimates of mean halo mass as a function
of stellar mass from stacking analyses of the gravitational lensing signal and
the satellite dynamics of SDSS galaxies. For M_* ~ 5.5 x 10^10 M_sun, the
stellar mass usually assumed for the Milky Way, the implied halo mass is ~ 2 x
10^12 M_sun, consistent with most recent direct estimates and inferences from
the MW/M31 Timing Argument. The fraction of the baryons associated with each
halo which are present as stars in its central galaxy reaches a maximum of 20%
at masses somewhat below that of the Milky Way, and falls rapidly at both
higher and lower masses. These conversion efficiencies are lower than in almost
all recent high-resolution simulations of galaxy formation, showing that these
are not yet viable models for the formation of typical members of the galaxy
population. When inserted in the Millennium-II Simulation, our derived relation
between stellar mass and halo mass predicts a stellar mass autocorrelation
function in excellent agreement with that measured directly in the SDSS. The
implied Tully-Fisher relation also appears consistent with observation,
suggesting that galaxy luminosity functions and Tully-Fisher relations can be
reproduced simultaneously in a LCDM cosmology.