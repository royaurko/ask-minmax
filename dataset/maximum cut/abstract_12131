The electronic structures of substitutional rare-earth (RE) impurities in
GaAs and cubic GaN are calculated. The total energy is evaluated with the
self-interaction corrected local spin density approximation, by which several
configurations of the open 4f shell of the rare-earth ion may be investigated.
The defects are modelled by supercells of type REGa$_{n-1}$As$_n$, for n=4, 8
and 16. The preferred defect is the rare-earth substituting Ga, for which case
the rare-earth valency in intrinsic material is found to be trivalent in all
cases except Ce and Pr in GaN. The 3+ --> 2+ f-level is found above the
theoretical conduction band edge in all cases and within the experimental gap
only for Eu, Tm and Yb in GaAs and for Eu in GaN. The exchange interaction of
the rare-earth impurity with the states at both the valence band maximum and
the conduction band minimum is weak, one to two orders of magnitude smaller
than that of Mn impurities. Hence the coupling strength is insufficient to
allow for ferromagnetic ordering of dilute impurities, except at very low
temperatures.