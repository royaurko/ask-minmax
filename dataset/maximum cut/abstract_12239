We consider capacity of discrete-time channels with feedback for the general
case where the feedback is a time-invariant deterministic function of the
output samples. Under the assumption that the channel states take values in a
finite alphabet, we find an achievable rate and an upper bound on the capacity.
We further show that when the channel is indecomposable, and has no intersymbol
interference (ISI), its capacity is given by the limit of the maximum of the
(normalized) directed information between the input $X^N$ and the output $Y^N$,
i.e. $C = \lim_{N \to \infty} \frac{1}{N} \max I(X^N \to Y^N)$, where the
maximization is taken over the causal conditioning probability
$Q(x^N||z^{N-1})$ defined in this paper. The capacity result is used to show
that the source-channel separation theorem holds for time-invariant determinist
feedback. We also show that if the state of the channel is known both at the
encoder and the decoder then feedback does not increase capacity.