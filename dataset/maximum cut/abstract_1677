We consider asymptotics for the maximum of a modulated random walk whose
increments $\xi_n^{X_n}$ are heavy-tailed. Of particular interest is the case
where the modulating process $X$ is regenerative. Here we study also the
maximum of the recursion given by $W_0=0$ and, for $n\ge1$,
$W_n=\max(0,W_{n-1}+\xi_n^{X_n})$