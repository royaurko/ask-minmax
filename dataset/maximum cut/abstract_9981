This paper describes STECMAP (STEllar Content via Maximum A Posteriori), a
flexible, non-parametric inversion method for the interpretation of the
integrated light spectra of galaxies, based on synthetic spectra of single
stellar populations (SSPs). We focus on the recovery of a galaxy's star
formation history and stellar age-metallicity relation. We use the high
resolution SSPs produced by PEGASE-HR to quantify the informational content of
the wavelength range 4000 - 6800 Angstroms.
  A detailed investigation of the properties of the corresponding simplified
linear problem is performed using singular value decomposition. It turns out to
be a powerful tool for explaining and predicting the behaviour of the
inversion. We provide means of quantifying the fundamental limitations of the
problem considering the intrinsic properties of the SSPs in the spectral range
of interest, as well as the noise in these models and in the data.
  We performed a systematic simulation campaign and found that, when the time
elapsed between two bursts of star formation is larger than 0.8 dex, the
properties of each episode can be constrained with a precision of 0.04 dex in
age and 0.02 dex in metallicity from high quality data (R=10 000,
signal-to-noise ratio SNR=100 per pixel), not taking model errors into account.
  The described methods and error estimates will be useful in the design and in
the analysis of extragalactic spectroscopic surveys.