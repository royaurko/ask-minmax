We investigate de Haas-van Alphen (dHvA) oscillations in the mixed state of
a type-II two-dimensional superconductor within a self-consistent Gor'kov
perturbation scheme. Assuming that the order parameter forms a vortex lattice
we can calculate the expansion coefficients exactly to any order. We have
tested the results of the perturbation theory to fourth and eight order against
an exact numerical solution of the corresponding Bogoliubov-de Gennes
equations. The perturbation theory is found to describe the onset of
superconductivity well close to the transition point $H_{c2}$. Contrary to
earlier calculations by other contributors we do not find that the perturbative
scheme predicts any maximum of the dHvA-oscillations below $H_{c2}$. Instead
we obtain a substantial damping of the magnetic oscillations in the mixed state
as compared to the normal state. We have examined the effect of an oscillatory
chemical potential due to particle conservation and the effect of a finite
Zeeman splitting. Furthermore we have investigated the recently debated issue
of a possibility of a sign change of the fundamental harmonic of the
magnetic oscillations. Our theory is compared with experiment and we have
found good agreement.