Based on the algorithmic proof of Lov\'asz local lemma due to Moser and
Tardos, the works of Grytczuk et al. on words, and Dujmovi\'c et al. on
colorings, Esperet and Parreau developed a framework to prove upper bounds for
several chromatic numbers (in particular acyclic chromatic index, star
chromatic number and Thue chromatic number) using the so-called \emph{entropy
compression method}.
  Inspired by this work, we propose a more general framework and a better
analysis. This leads to improved upper bounds on chromatic numbers and indices.
In particular, every graph with maximum degree $\Delta$ has an acyclic
chromatic number at most $\frac{3}{2}\Delta^{\frac43} + O(\Delta)$. Also every
planar graph with maximum degree $\Delta$ has a facial Thue choice number at
most $\Delta + O(\Delta^\frac 12)$ and facial Thue choice index at most $10$.