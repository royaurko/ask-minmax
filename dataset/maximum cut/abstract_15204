We present a self-consistent model for the study of the structure of a
neutron star in strong magnetic fields. Starting from a microscopic Lagrangian,
this model includes the effect of the magnetic field on the equation of state,
the interaction of the electromagnetic field with matter (magnetisation), and
anisotropies in the energy-momentum tensor, as well as general relativistic
aspects. We build numerical axisymmetric stationary models and show the
applicability of the approach with one example quark matter equation of state
(EoS) often employed in the recent literature for studies of strongly
magnetised neutron stars. For this EoS, the effect of inclusion of magnetic
field dependence or the magnetisation do not increase the maximum mass
significantly in contrast to what has been claimed by previous studies.