Password: The planning problems confronting logistics service providers frequently involve complex decisions. Motivated by a real-life case study, this paper considers short-range weekly planning on the part of postal companies that must decide about pickup tours and delivery tours for fluctuating volume (number of shipments), with time windows for the demand points, in consideration of variable vehicle capacities and personnel planning, and including outsourcing decisions for tours and drivers. This problem can be formulated as a model of combined tour and personnel planning. However, because a real formulation of the problem involves hundreds of millions of variables and numerous constraints, in practice only heuristic solutions prove relevant. This paper proposes a hybrid metaheuristic combined with a construction heuristic that—as computer simulations have demonstrated—are suitable for practice. Keywords Integrated vehicle routing and crew scheduling ; Multi-period VRP ; Outsourcing options ; Metaheuristics 1. Problem Short-range (operative) planning on the part of logistics service providers—as exemplified by postal companies and specialized parcel services—involves complex decision problems. For a given volume (number of shipments per day) that varies on short notice, the following must be decided: 1. How should precarriage be handled? Precarriage is the pickup of shipments (letters, packages, goods, etc.) at various demand points (e.g., post offices), whereby specific tours are made. Here a tour is an unambiguous sequence of demand points to be visited by a selected transport vehicle. Precarriage for a tour begins at the depot and extends to the respective demand points and back to the depot ( Fig. 1 ). The depot then sorts the packages according to destination. The duration of precarriage is determined by the time window (i.e., the opening hours of the depot for precarriage). Furthermore, the pickup sequence for precarriage is also determined by a time window for each demand point. Fig. 1.  How should postcarriage be handled? Postcarriage is the delivery of shipments that have been sorted at the depot. Certain volumes are ready at the depot for delivery at given points in time. Postcarriage then requires a decision concerning which tours are to be conducted from the depot to the demand points (e.g., post offices) and back to the depot. Again time windows must be observed for the depot and the demand points. 3. Which types of vehicle with varying capacities (e.g., tractor/trailer combinations) should be used for individual tours? 4. Which of the company's own (limited) personnel should be allocated to a tour? 5. Should leasing drivers be allocated for some tours with the company's own vehicles? 6. Should some tours be outsourced to subcontracting freight carriers, and if so, which tours? Points 1–6 above represent tour planning problems with time windows and variable vehicle capacities. Because precarriage and postcarriage must be planned for each (half) workday, a work week comprises 11 half-day planning periods ( τ={1,2,3,…,11 τ = { 1 , 2 , 3 , … , 11 }, two for each workday and one on Saturday) with respective volumes varying from period to period. The 24-h planning period 1 starts with the tours Monday morning (tour period τ =1) with postcarriage and with precarriage tours in the afternoon ( τ =2) and ends with planning period 11 with precarriage on Saturday. Thus a 24-h planning period is characterized by two tour periods ( τ , τ +1). The following decisions must be made regarding alternative personnel allocation options: • Allocation of driver d (from the company's own driver pool) for tour k with vehicle type v for each period τ . • Utilization of a leasing driver for tour k with vehicle type v for each period τ . • Employment of external freight carriers for tour k with vehicle type v for each period τ . A number of additional constraints must be observed for personnel allocation: • The number of company drivers—the crew—is limited. If a driver's hours during a work week exceed normal working hours (in our example 40 h), then the company incurs overtime costs. Here work time is defined as driving time+loading/unloading time+preparation time at the depot. • Actual driving time for each driver per workday is restricted (in our example 9 h). • If the driving time for a tour for a given driver exceeds a prescribed time (in our example 4.5 ho), then the driver is entitled to a break (in our example 45 min). • If a company driver has already accrued the maximum number of hours per workday, this driver can be assigned again only after a specified interim time (in our case 11 h); during this period, the driver must be free of all work-related duties. Tour planning must ensure observance of these crew-scheduling (personnel-planning) constraints, since these two planning tasks mutually influence each other. Thus the number of tours directly determines the number of drivers needed. In addition, a decision about whether a tour is to be handled in-house or by a leasing driver or by outsourcing requires the construction of the tours. Furthermore, the allocation of a company driver with respect to driving time over the entire work week determines whether this driver is due overtime pay. Since this decision requires knowledge of the allocation of the driver for all the planning periods of the week, this precludes independent determination of tours. Thus to proceed correctly, we must solve a simultaneous model whose analysis involves tour planning as well as crew scheduling (personnel planning) and outsourcing decisions. The objective function must reflect relevant costs of the tour, the respective vehicle type and personnel assignment. The variable costs of a tour driven by a company's driver depend on the distance traveled and the cost per kilometer (vehicle costs), which in turn depends on the vehicle type. Since company personnel receive a regular salary, only the costs of overtime are additionally considered for this purpose. When a leasing driver drives a company vehicle, the costs consist of vehicle costs as well as the costs for the leasing driver, which depend on the duration of the tour and a cost factor per time unit for the leasing driver. If the tour is outsourced, time-related costs are computed; i.e., the duration of the tour is multiplied by a certain cost factor. In the following, we first present a formal description of the problem to show which objective function and complex constraints must be kept in mind by the decision maker. 2. Formal description of the problem In formulating our model of a vehicle routing problem with time windows, variable capacities and personal assignment below, we employ the following symbols.