Password: In 2001, Caramia and his coauthors introduced a very fast and efficient heuristic for rooting a fleet of vehicles for dynamic combined pickup and delivery services [Caramia, M., Italiano, G.F., Oriolo, G., Pacifici, A., Perugia, A., 2001. Routing a fleet of vehicles for dynamic combined pickup and delivery services. In: Proceedings of the Symposium on Operation Research 2001, Springer-Verlag, Berlin/Heidelberg, pp. 3–8.]. The authors assume that every client names a stretch-factor that denotes the maximal relative deviation from the shortest path between pickup and delivery point. Waiting times are not allowed. As these assumptions are not very realistic, this paper now presents the results of adapting this algorithm to the dynamic pickup and delivery vehicle routing problem with several time windows. Waiting times of vehicles are admitted. Moreover, the computational results are considerably improved by local search techniques making use of free computational capacity. Keywords Pickup and delivery ; Vehicle routing ; Dynamic ; Vehicle scheduling ; Time windows ; Dial-a-ride 1. Introduction In this paper, the dynamic pickup and delivery vehicle routing problem with time windows is considered. Caramia and his coauthors developed their algorithm during a study concerning a local multi-cab metropolitan transportation system ( Caramia et al., 2001 ). In that system each cab is allowed to transport up to six customers at a time, each of them having his special pickup and delivery places, a time window for pickup and a stretch-factor that denotes the maximal deviation from the shortest possible travel time the customer accepts. The shortest possible travel time denotes the length of the shortest path from the customer’s pickup to his delivery place. The deviation from the shortest travel time originates in the cab’s detouring in order to pick up or deliver other customers. Giving his stretch factor, the customer impacts directly the time spent in the cab (and indirectly his delivery time). Customers call during the day to apply for service at the same day. Their request must be answered online on the phone: the cab enterprise has to decide at once whether the customer can be accepted or must be rejected. The enterprise is willing to accept as many customers as possible. Replacing the stretch-factor by a delivery time window the customers’ needs are met even better than before: First, the customer may influence directly his delivery time. So he can make sure that he will arrive in time, assuming he is on his way to any kind of appointment. Second, the customer does not have to estimate a stretch-factor. Many customers may have difficulty in naming such a factor, especially as it is based on the shortest possible travel time which might be unknown or has to be named by the cab enterprise. Further, the vehicles shall now be allowed to wait. These modifications ensure that the algorithm can also be applied to transportation problems concerning goods instead of people. Taking into account that lead times in transportation sector are decreasing, this problem may be of special interest in large scale transportation settings. On the other hand it can be established in transportation networks of large operating sites. The literature on the dynamic pickup and delivery vehicle routing problem deals in most instances with the dial-a-ride problem which was first examined by Wilson et al. (1971) . In the following, mainly the dynamic single-vehicle routing problem with pickup and delivery and time windows and the static multi-vehicle routing problem with pickup and delivery and time windows have been treated. A good overview of time window constrained vehicle routing problems including the dial-a-ride problem can be found in Solomon and Desrosiers (1988) . Psaraftis (1995) summarizes all dynamic vehicle routing problems and classifies them. New developments on dial-a-ride problems are presented by Cordeau and Laporte (2002) in their paper. An exact algorithm based on column generation has been developed by Dumas et al. (1991) . Ruland and Rodin (1997) present exact branch-and-cut procedures to solve small problem instances. The heuristic approaches have mainly been insertion heuristics and local search techniques. Local search techniques have been presented by Healy and Moll (1995) and Van der Bruggen et al. (1993) . Cordeau and Laporte (2003) published a tabu search heuristic for the static dial-a-ride problem. Jaw et al. (1986) presented an insertion algorithm which Madsen et al. (1995) used to develop their algorithm REBUS. Caramia et al. (2001) proposed an insertion algorithm including an optimal vehicle routing procedure which has now been adapted to the dynamic vehicle routing problem with two time windows and which has been combined with a tabu search procedure to improve the heuristic assignment. 2. Problem statement The problem consists in routing a set F of vehicles serving a set N of demands. The road network is represented by a graph G  = ( V ,  E ) whose vertices V   are the possible pickup and delivery points and whose arcs correspond to roads connecting these points. The travel cost of each arc is represented by the function d:E→R + d : E → R + which satisfies the triangle inequality d ij  ⩽  d ik  +  d kj . The planning horizon is denoted the interval [ P 1 ,  P 2 ]. Demands for transportation pop up dynamically and we do not have any information in advance about quantity and location of further demands. Each demand i  ∈  N consists of • an amount of goods to be transported by one of the vehicles, • a pick-up point u i  ∈  V , • a delivery point v i  ∈  V , • a first time window [ a i ,  b i ] ⊂ [ P 1 ,  P 2 ] during which pickup has to take place, • a second time window [ c i ,  e i ] ⊂ [ P 1 ,  P 2 ] during which delivery has to be carried out. Any vehicle f  ∈  F is characterized by • a starting point s f  ∈  V where the vehicle is located at time P 1 , • an end point z f  ∈  V where the vehicle shall be at time P 2 , • its capacity k f . When at any time τ  ∈ [ P 1 ,  P 2 ] a new demand pops up, we have to decide “online” either to accept or to reject that demand. Further, the accepted demands have to be assigned to the vehicles and each vehicle must be routed. The objective function is to minimize the distance travelled by all vehicles during the planning horizon [ P 1 ,  P 2 ]. Note: In Caramia et al. (2001) , the customers have to name a stretch-factor that denotes the maximal factor real travel time may exceed the shortest direct way travel time. This stretch-factor is now replaced by the second time window. This paper is organized as follows: Section 3 outlines a solution algorithm. First, the main ideas of the algorithm as proposed in Caramia et al. (2001) are presented. Then the consideration of a second time window for each demand and the admittance of waiting times are motivated and implemented, before the applied local search techniques are presented. In every subsection the computational results are given. Section 4 contains the conclusion. The solution algorithm proposed in Caramia et al. (2001) is a heuristic approach. It is explained in Section 3.1 . The implementation of the second time window [ c i ,  e i ] and the admittance of waiting times are presented in Section 3.2 . Further, the introduced local search techniques are stated in Section 3.3 . 3.1. Heurisitic approach The algorithm mainly consists of two parts: a quick single-vehicle routing algorithm and a heuristic to solve the multi-vehicle routing problem, based on the results of the exact single-vehicle routing. The following paragraph deals with the exact single-vehicle routing algorithm. Thereafter the paragraph “multi-vehicle routing” outlines the heuristic to assign demands to a set of vehicles. 3.1.1. Single-vehicle routing The single-vehicle routing problem consists in sequencing the pickup and delivery points of demands i  ∈  N f where N f  ⊂  N denotes the set of demands i  ∈  N assigned to some fixed vehicle f  ∈  F . The sequence has to satisfy the following constraints: • For each demand i  ∈  N f the goods must be picked up before they can be delivered. • The time windows [ a i ,  b i ] and [ c i ,  e i ] must be met by the pickup and delivery times of demand i . • The vehicle’s capacity must not be exceeded. The total travel cost shall be minimized.