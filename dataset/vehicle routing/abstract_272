Password: In this article, the real-time time-dependent vehicle routing problem with time windows is formulated as a series of mixed integer programming models that account for real-time and time-dependent travel times, as well as for real-time demands in a unified framework. In addition to vehicles routes, departure times are treated as decision variables, with delayed departure permitted at each node serviced. A heuristic comprising route construction and route improvement is proposed within which critical nodes are defined to delineate the scope of the remaining problem along the time rolling horizon and an efficient technique for choosing optimal departure times is developed. Fifty-six numerical problems and a real application are provided for demonstration. Keywords Time-dependent travel time ; Real time ; Time window constraints ; Vehicle routing problem 1. Introduction The vehicle routing problem (VRP) has been and remains a rich topic for researchers and practitioners. Given a set of geographically dispersed customers, each showing a positive demand for a given commodity, the VRP consists of finding a set of tours of minimum length for a fleet of vehicles initially located at a central depot, such that the customers’ demands are satisfied and the vehicles’ capacities are not exceeded. Taking into consideration the time windows of the customers and the depot(s) extends the problem into the vehicle routing problem with time windows (VRPTW). There are many possible extensions of the VRPTW, such as pickup and delivery, VRPTW with backhauls, inventory routing, period routing, and so on. Most research focuses on static or deterministic vehicle routing in which all information is known at the time of planning. In most real-life applications, real-time information is generated only when the vehicles are en route. Real-life examples of real-time vehicle routing problems include the distribution of oil to private households, the pick-up of courier mail/packages and the dispatching of buses for the transportation of elderly and handicapped people. Since customer service-oriented policy is a current focal point in business administration, more and more companies offer a service to customers within a few hours of the time a request is received. In such an operating environment, the demand profile, including customer location, actual demand, and the service time window, may not be known until the request is actually received. Furthermore, ordinary urban traffic congestion, either recurrent or non-recurrent, can seriously affect the vehicle routing plan. Time-dependent travel time function captures recurrent congestion to a certain degree. However, non-recurrent congestion still cannot easily be predicted in advance and the corresponding travel time needs to be updated in a real-time manner. The dynamism of such a system requires bringing the complexity of real-time and time dependency into the VRP in the form of the real-time time-dependent vehicle routing problem with time windows (RT-TDVRPTW), which is the focus of this paper. The paper is divided into six sections. After this introductory section and the literature review in Section 2 , a version of the RT-TDVRPTW is formulated and discussed in Section 3 . In Section 4 we propose and elaborate on a heuristic that includes methods for route construction and improvement. In Section 5 , we demonstrate and validate our model based on, with minor modifications, fifty-six test problems created by Solomon. At the end of Section 5 , we test our model on an actual case—a professional logistic company in Taiwan. The last section discusses our conclusions. 2. Literature review The VRP and their variations are principally static; all information about customers and travel times are known a priori. The literature related to the dynamic vehicle routing problem (DVRP) is relatively scarce. Some of the earliest work on the DVRP was conducted by Bertsimas and Ryzin, 1991  and  Bertsimas and Ryzin, 1993 . In their studies, the orders/demands arrive randomly in time and the dispatching of vehicles is a continuous process of collecting demands, forming routes and dispatching vehicles. Further work regarding stochastic and dynamic network and routing can be found in Powell et al. (1995) . A survey of the DVRP, including the delivery of petroleum products or industrial gases, courier services, intermodal services, tramp ship operations, pickup and delivery services, management of container terminals, and so forth, was presented by Psaraftis (1995) . Bertsimas and Simchi-Levi (1996) conducted a survey of the dynamic and stochastic vehicle routing problem and examined the worst and average-case behaviors of known algorithms. Gendreau and Potvin (1998) also recently surveyed the DVRP and pointed out the importance of considering other sources of uncertainty in the DVRP, for instance, request cancellations and service delays. Larsen (2001) dedicated his Ph.D. Thesis to the DVRP. Generally speaking, most of the DVRP focus on determining an a priori solution by considering the uncertainty of service requests. Currently, it has become possible to obtain a large amount of online information due to the progress of communication and positioning technologies. Regarding real-time demand, Gendreau et al. (1999) studied real-time vehicle routing and dispatching, which deals with customers who generate requests in real-time and must be served within a given soft time window. A heuristic using tabu search with a parallel processing technique was proposed for the solution. Shieh and May (1998) studied the VRPTW with real-time demands and proposed an online algorithm for it. Liu (2000) tackled a traveling salesman problem with both time dependent travel times and real-time demands. Chen et al. (2002) developed an algorithm for the time-dependent vehicle routing problem with time-windows but did not validate it using real problems. Chang et al. (2003) tackled the real-time VRPTW with simultaneous delivery/pickup demand, proposing a heuristic comprising route construction, route improvement and tabu search. Time-dependent travel time, in addition to real-time information, is another important issue in our study. Time-dependent travel times differ according to the sequence of service ( Picard and Queyranne, 1978 , Fox et al., 1980  and  Lucena, 1990 ) or time of day ( Malandraki and Daskin, 1992 ). A restricted dynamic programming method was proposed by Malandraki and Dial (1996) for solving a time-dependent TSP. Nonetheless, due to the computational complexity involved, papers on the time-dependent VRP are relatively few. To the authors’ knowledge, the topic of this paper—the VRPTW with real-time and time-dependent travel times in addition to real-time demands (i.e., the RT-TDVRPTW)—has previously not been addressed by other researchers. 3. Model formulation 3.1. Problem description In the RT-TDVRPTW, a planner may not be aware of all information for route planning at the time the routing process begins. Moreover, information, including demands and time-dependent travel times, may change after the initial routes are constructed, and such information cannot be known in advance. When a new customer appears, the main task of the dispatching center is to include the new customer into the current routing plan. Yet, if time dependent travel times have changed due to an unexpected incident(s), in order to fulfill time window constraints and achieve a lower travel cost objective, scheduled incoming customers must be re-scheduled based on the position and loading of en route vehicles. The dispatching center needs a very quick answer in order to respond in real-time to both the real-time demands and time-dependent travel times. In order to capture the dynamic characteristics of the RT-TDVRPTW, we employ the concept of time rolling horizon and hence adopt a series of mixed integer programming submodels to formulate the problem. Each submodel represents a special VRPTW at a particular point in time when travel times and/or demands have changed. Each special VRPTW involves vehicles that may depart from current customers (called critical nodes, not the actual depot) and return to the actual depot, because those vehicles are already on their routes when the travel times and/or demands have changed. The goal of the RT-TDVRPTW at any particular time is to find a set of minimum cost vehicle routes, which originate from the critical nodes or the depot, N c ( τ ) ∪ {0}, visit each unserviced node, N u ( τ ), and terminate at the depot. The cost of the vehicle routes consists of travel times and waiting times, and each waiting time resulting from early arrival before a time window and/or from delaying departure after a service has finished. The reader may refer to Appendix A for a list of the notation used in this paper.