Password: We propose a nonlinear mathematical model to consider production scheduling and vehicle routing with time windows for perishable food products in the same framework. The demands at retailers are assumed stochastic and perishable goods will deteriorate once they were produced. Thus the revenue of the supplier is uncertain and depends on the value and the transaction quantity of perishable products when they are carried to retailers. The objective of this model is to maximize the expected total profit of the supplier. The optimal production quantities, the time to start producing and the vehicle routes can be determined in the model simultaneously. Furthermore, we elaborate a solution algorithm composed of the constrained Nelder–Mead method and a heuristic for the vehicle routing with time windows to solve the complex problem. Computational results indicate our algorithm is effective and efficient. Keywords Perishable ; Production scheduling ; Vehicle routing ; Time windows 1. Introduction Perishable goods, such as food products, vegetables, flowers, living animals and ready-mix concrete, often deteriorate during the production and delivery processes. More and more suppliers adopt just-in-time production and delivery strategy to fulfill their orders from retailers because they can reduce the loss of their own profit due to deterioration of perishable goods. Perishable goods involve two different concepts of deterioration. First, all items become simultaneously obsolete at the end of the planning horizon. Second, items deteriorate throughout the planning horizon. This category can be further divided into two classes: (1) items with a fixed shelf life such as blood or ready-mix concrete; (2) items with continuous decay such as food, vegetables, flowers, living animals and so on. Among these perishable goods, fresh food products usually deteriorate rapidly. The value or quality of perishable food products will decrease rapidly once they are produced and will keep decaying when being delivered. The revenue of the food supplier will depend on the condition of the products when they are received. Thus, timely production and delivery of perishable foods significantly affect the supplier's revenue. The rapid and continuous decaying characteristic of food products makes the suppliers postpone the time to produce and deliver the products as fast as possible. Furthermore, it is important nowadays that perishable foods must be delivered within allowable delivery times, or time-windows. If a vehicle arrives late, a penalty cost may be incurred. Due to the aforementioned facts, an integrated and well-designed production schedule and delivery routes must be made so that the supplier can ensure the provision of freshest foods and satisfy customers’ requirements in a cost-effective way. However, little has been done to investigate the coordination of production scheduling and delivery planning for perishable goods. Traditional production scheduling focuses on the determination of schedules for production such that some performance measures are optimized without considering the delivery plan. On the other hand, the distribution planning usually focuses on minimizing the transportation cost of finished goods and will not affect the production schedule. Therefore, the coordination of production scheduling and delivery planning becomes an important issue in perishable food industry and urgently needs further studies. In this study, we assumed the value or quality of perishable food products will decrease throughout their lifetimes. The rate of deterioration is given and fixed. A supplier produces perishable food products and sells to retailers, whose demands are assumed stochastic and follow some known probability distributions. We consider both production scheduling and vehicle routing with time windows for perishable food products, under stochastic demands, in the same framework. The supplier decides production quantities, time to start producing and the delivery routes to maximize the expected total profit. The remainder of the paper is organized as follows. Section 2 features a brief literature review, after which, in Section 3 , the production scheduling and vehicle routing problem with time windows for perishable goods (PS-VRPTW-P) is formulated as an integer nonlinear programming model. In Section 4 , an elaborated solution algorithm is proposed, and in Section 5 , numerical results are provided. The paper is concluded in Section 6 . 2. Literature review Most of the literature regarding perishable goods is in the fields of pricing, return policies and inventory control to a retailer (see [1] , [2] , [3]  and  [4] ). Papers discussing production scheduling and/or distribution of perishable goods are relatively rare. In the following paragraphs, we will review some literature in three classes: production scheduling of perishable goods, production scheduling with delivery and vehicle routing for food or perishable goods. First we review literature about production scheduling of perishable goods. Arbib et al. [5] consider a three-dimensional matching model for perishable production scheduling, which is studied under two independent aspects: (i) the relative perishability of products and (ii) the feasibility of launching/completion time. Garcia et al. [6] consider a ready-mix concrete production and distribution problem, in which the selection of orders to be processed by a ready-mix concrete manufacturing plant has to be made and orders have a fixed due date and are delivered directly to the customer site. Silva et al. [7] also study the production and distribution problem of ready-mix concrete. Sana et al. [8] consider a volume flexible manufacturing system for a deteriorating item with a time-dependent demand rate, allowing shortages in inventory. Entrup et al. [9] develop three mixed-integer linear programming models that integrate shelf-life issues into production planning and scheduling. Literature about production scheduling with delivery is discussed as follows. Zdrzalka [10] deals with the single-machine scheduling problem in which each job has a processing time and a delivery time; the objective is to find a sequence of jobs which minimizes the time by which all jobs are delivered. Cheng et al. [11] study the single-machine scheduling problem with batch deliveries, in which jobs in a batch are delivered to the customer together upon the completion time of the last job in the batch; the objective is to minimize the sum of the batch delivery and job earliness penalties, which derive from the difference between the delivery time of the batch and the job completion time. However, the travel time is not considered. Chang and Lee [12] also study the machine scheduling and product delivery, in which jobs require different amounts of storage space during delivery; the objective is to find a schedule for processing jobs such that the time required for all jobs to be processed and delivered to the respective customers is minimized. Most of above research assume that a job is delivered directly to the customer and the delivery time is fixed. Li et al. [13] develop a single-machine scheduling model that incorporates the routing decisions of a delivery vehicle which serves customers at different locations. The objective is to minimize the sum of job arrival times. Finally, we focus on the research about vehicle routing for food or perishable goods. The well-known vehicle routing problem with/without time windows (VRPTW/VRP) has been discussed in many forms. However, not many papers consider VRPTW/VRP for perishable goods until recent years. Hwang [14] develops an effective distribution model for determining optimal patterns of food supply and inventory allocation for famine relief area. The proposed vehicle routing problem incorporating inventory allocation and optimal distribution aims at minimizing the amount of pains and starving instead of travel distance or time. Prindezis et al. [15] present an application service provider that would offer services of distribution logistics for central food market enterprises by appropriately solving the fleet management problem. Tarantilis and Kiranoudis [16] propose a threshold-accepting-based algorithm to solve the fresh milk distribution problem. The problem they formulated is essentially a heterogeneous fixed fleet vehicle routing problem and no information about perishable goods is considered. Hsu et al. [17] consider the randomness of the perishable food delivery process and construct a stochastic VRPTW model to obtain optimal delivery routes, loads, fleet dispatching and departure times for delivering perishable food from a distribution center. Naso et al. [18] consider the problem of scheduling the production and distribution activities of a network of plants supplying rapidly perishable materials. They propose a strategy that combines genetic algorithms and schedule construction heuristics for job scheduling and truck routing. Osvald and Stirn [19] develop a heuristic algorithm for the distribution of fresh vegetables in which the perishability represents a critical factor. The problem was formulated as a VRPTW with time-dependent travel times. The model considers the impact of the perishability as part of the overall distribution costs. To the best of our knowledge, it seems that no research simultaneously consider both production scheduling and vehicle routing with time windows for perishable goods under stochastic demands. 3. Model formulation In this section we propose a mathematical model of PS-VRPTW-P, in which a supplier has to decide how many and when he/she should start producing perishable food products as well as the optimal vehicle route to deliver the products to retailers. The objective of the supplier is to maximize its expected total profit. The supplier has only one production line but produces several kinds of perishable products. In other words, it produces one kind of products at a time. Given only one production line available, the batch production containing several products for a to-be-dispatched vehicle is arranged one product by one product in order and priority is always given to the product with lower decay rate. After all the products for the to-be-dispatched vehicle are produced, the production of products for the next vehicle can then begin.