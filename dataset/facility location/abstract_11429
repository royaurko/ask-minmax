We present simultaneous photospheric and chromospheric observations of the
trailing sunspot in NOAA 10904 during a weak flare eruption (GOES magnitude
B7.8), obtained with the Swedish Solar Telescope (SST) in La Palma, Canary
Islands. High-resolution \ion{Ca}{ii} $H$ images show a typical two-ribbon
structure that has been hitherto only known for larger flares, and the flare
appears in a confined region that is discernible by a bright border. The
underlying photosphere shows a disturbed penumbral structure with intersecting
branches of penumbral filaments. High-resolution Doppler- and
vector-magnetograms exhibit oppositely directed Evershed flows and magnetic
field vectors in the individual penumbral branches, resulting in several
regions of magnetic azimuth discontinuity and several islands where the
vertical magnetic field is reversed. The discontinuity regions are co-spatial
with the locations of the onset of the flare ribbons. From the results, we
conclude that the confined flare region is detached from the global magnetic
field structure by a separatrix marked by the bright border visible in
\ion{Ca}{ii} $H$. We further conclude that the islands of reversed vertical
field appear because of flux emergence and that the strong magnetic shear
appearing in the regions of magnetic azimuth discontinuity triggers the flare.