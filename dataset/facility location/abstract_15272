We propose a new two-stage model for acceleration of electrons in solar
flares. In the first stage, electrons are accelerated stochastically in a
post-reconnection turbulent downflow. The second stage is the reprocessing of a
subset of these electrons as they pass through a weakly compressive fast shock
above the apex of the closed flare loop on their way to the chromosphere. We
call this the "shock reprocessing" model. The model reproduces the energy
dependent arrival time delays observed for both the pulsed and smooth
components of impulsive solar flare x-rays with physically reasonable
parameters for the downflow region. The model also predicts an emission site
above the loop-top, as seen in the Masuda flare. The loop-top source
distinguishes the shock reprocessing model from previous models. The model
makes testable predictions for the energy dependence of footpoint pulse
strengths and the location and spectrum of the loop-top emission, and can
account for the observed soft-hard-soft trend in the spectral evolution of
footpoint emission. Our model highlights the concept that reconnection is an
acceleration environment rather than a single process. Which combination of
processes operate may depend on the initial conditions that determine, for
example, whether the reconnection downflow is turbulent. The shock reprocessing
model comprises one such combination.