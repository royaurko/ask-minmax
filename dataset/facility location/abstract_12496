We analyze the spectral evolution of GRB 090902B and show that
subphotospheric dissipation can explain both the spectra and the spectral
evolution. The emission from a GRB photosphere can give rise to a variety of
spectral shapes. The spectrum can have a shape close to that of a Planck
function (as is observed during the first half of GRB090902B) or be broadened,
resembling a typical Band function (as is observed during the second half of
GRB090902B). The shape mainly depends on the strength and location of the
dissipation in the jet, the ratio of the energy densities of thermal photons
and of the electrons at the dissipation site, as well as on the strength of the
magnetic field. We further discuss numerical models of the dissipation and
relate these to the observed spectra.