We present analytic calculations of angular momentum transport and gas inflow
in galaxies, from scales of ~kpc to deep in the potential of a central black
hole (BH). We compare these analytic calculations to numerical simulations and
use them to develop a sub-grid model of BH growth that can be incorporated into
semi-analytic models or cosmological simulations. Both analytic calculations
and simulations argue that the strongest torque on gas arises when
non-axisymmetric perturbations to the stellar gravitational potential produces
orbit crossings and shocks in the gas. This is true both at large radii ~0.01-1
kpc, where bar-like modes dominate the non-axisymmetric potential, and at
smaller radii <10 pc, where a lopsided/eccentric disk dominates. The
traditional orbit crossing criterion is not always adequate to predict the
locations of, and inflow due to, shocks in gas+stellar disks with finite sound
speeds. We derive a modified criterion that predicts the presence of shocks in
stellar dominated systems even absent formal orbit crossing. We then derive
analytic expressions for the loss of angular momentum and the resulting gas
inflow rates in the presence of such shocks. We test our analytic predictions
using hydrodynamic simulations at a range of galactic scales, and show that
they successfully predict the mass inflow rates and quasi-steady gas surface
densities with small scatter (0.3 dex). We use our analytic results to
construct a new estimate of the BH accretion rate given galaxy properties at
larger radii. This captures the key scalings in the numerical simulations.
Alternate estimates such as the local viscous accretion rate or the spherical
Bondi rate fail systematically to reproduce the simulations.