We study the scattering of gravity waves in longitudinal inhomogeneous
stationary flows. When the flow becomes supercritical, counterflow propagating
shallow waves are blocked and converted into deep waves. We show that the
reflected waves are amplified in such a way that, in the zero-frequency limit,
the free surface develops an undulation, i.e., a zero-frequency wave of large
amplitude with nodes located at specific places. This amplification involves
negative energy waves, and implies that the unperturbed flat surface is
unstable against incoming perturbations of arbitrary small amplitude. The
relation between this instability and black hole radiation (the Hawking effect)
is discussed.