We present a procedure for fitting an ellipse to powder diffraction patterns
recorded on a planar 2D detector, which uses the peak intensities as weights.
This procedure works for complete and spotty diffraction rings. We outline all
the steps required: the interpolation of Cartesian pixel data into polar
co-ordinates based upon an approximate ellipse centre; the identification of
peak locations along each radial direction of a diffraction ring; and the
weighted least squares algebraic fit of an ellipse to that diffraction ring.
The performance of the procedure is assessed by characterising a complete
diffraction ring from a powder standard, and a spotty ring generated from a
complete ring of the standard. The fit of an ellipse to a spotty ring from an
alkane complex is also shown. Agreement in the calculated parameters for the
two rings is good. This procedure is implemented as part of an X-ray beam
energy and 2D detector calibration routine which is currently in use at
Beamline I12 (Diamond Light Source, UK).