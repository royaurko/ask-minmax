This paper presents a new approach for optimising the design of tidal stream
turbine farms. In this approach, the turbine farm is represented by a turbine
density function that specifies the number of turbines per unit area and an
associated continuous locally-enhanced bottom friction field. The farm design
question is formulated as a mathematical optimisation problem constrained by
the shallow water equations and solved with efficient, gradient-based
optimisation methods. The resulting method is accurate, computationally
efficient, allows complex installation constraints, and supports different goal
quantities such as to maximise power or profit. The outputs of the optimisation
are the optimal number of turbines, their location within the farm, the overall
farm profit, the farm's power extraction, and the installation cost. We
demonstrate the capabilities of the method on a validated numerical model of
the Pentland Firth, Scotland. We optimise the design of four tidal farms
simultaneously, as well as individually, and study how farms in close proximity
may impact upon one another.