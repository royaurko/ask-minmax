We perform Monte Carlo studies of vortices in three dimensions in a
cylindrical confinement, with uniform and nonuniform density. The former is
relevant to rotating 4He, the latter is relevant to a rotating trapped
Bose--Einstein condensate. In the former case we find dominant angular thermal
vortex fluctuations close to the cylinder wall. For the latter case, a novel
effect is that at low temperatures the vortex solid close to the center of the
trap crosses directly over to a tension-less vortex tangle near the edge of the
trap. At higher temperatures an intermediate tensionful vortex liquid located
between the vortex solid and the vortex tangle, may exist.