The detection of supernova features in the late spectra of several gamma-ray
burst afterglows has shown that at least a fraction of long-duration gamma-ray
bursts are associated to the final evolutionary stages of massive stars. Such
direct observations are impossible for bursts located at redshift beyond z~0.5
and different methods must be used to understand the nature and properties of
their progenitors. We review the observational evidence for two particular
bursts, for which high quality data are available: GRB 021004 (at z=2.323) and
the record redshift GRB 050904 (at z=6.29). We show that both GRBs are likely
to be associated to very massive stars, and that in both cases the progenitor
stars were able to modify their immediate environments with their radiative and
mechanic (wind) luminosity.