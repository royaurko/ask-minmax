We present a detailed investigation of the changing relationship between
galaxies and the dark matter haloes they inhabit from z~1.2 to the present day.
We do this by comparing precise galaxy clustering measurements over 133 deg2 of
the "Wide" component of the CFHT Legacy Survey (CFHTLS) with predictions of an
analytic HOD model where the number of galaxies in each halo depends only on
the halo mass. Starting from a parent catalogue of ~ 3x10^6 galaxies at i'_AB <
22.5 we use accurate photometric redshifts calibrated using ~ 10^4
spectroscopic redshifts to create a series of type-selected volume-limited
samples covering 0.2 < z < 1.2. Our principal result, based on clustering
measurements in these samples, is a robust determination of the
luminosity-to-halo mass ratio and its dependence on redshift and galaxy type.
For the full sample, this reaches a peak at low redshifts of Mh,peak =
4.5x10^11 h^-1 M_sun and moves towards higher halo masses at higher redshifts.
For redder galaxies the peak is at higher halo masses and does not evolve
significantly over the entire redshift range of our survey. We also consider
the evolution of bias, average halo mass and the fraction of satellites as a
function of redshift and luminosity. Our observed growth of a factor of ~ 2 in
satellite fraction between z~1 and z~0 is testament to the limited role that
galaxy merging plays in galaxy evolution for ~ 10^12 h^-1 M_sun mass haloes at
z<1. Qualitatively, our observations are consistent with a picture in which red
galaxies in massive haloes have already accumulated most of their stellar mass
by z~1 and subsequently undergo little evolution until the present day. The
observed movement of the peak location for the full galaxy population is
consistent with the bulk of star-formation activity migrating from higher mass
haloes at high redshifts to lower mass haloes at lower redshifts.