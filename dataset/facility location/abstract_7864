This paper proposes a centralised decision making framework at the macro base
station (MBS) for device to device (D2D) communication underlaying a two-tier
cellular network. We consider a D2D pair in the presence of an MBS and a femto
access point, each serving a user, with quality of service constraints for all
users. Our proposed solution encompasses mode selection (choosing between
cellular or reuse or dedicated mode), resource allocation (in cellular and
dedicated mode) and power control (in reuse mode) within a single framework.
The framework allows D2D mode only if the D2D receiver is located outside an
interference region and the D2D pair are located closer than a minimum
threshold distance. If D2D mode is allowed then either dedicated or reuse mode
is chosen depending on the availability of sufficient resources. For reuse
mode, we present a geometric vertex search approach to solve the power
allocation problem. We analytically prove the validity of this approach and
show that it achieves near optimal performance. For cellular and dedicated
modes, we solve the resource allocation problems with both time and frequency
sharing. Our simulations demonstrate the advantages of the proposed framework
in terms of the performance gains achieved in D2D mode.