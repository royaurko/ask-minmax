We study the set of solutions of random k-satisfiability formulae through the
cavity method. It is known that, for an interval of the clause-to-variables
ratio, this decomposes into an exponential number of pure states (clusters). We
refine substantially this picture by: (i) determining the precise location of
the clustering transition; (ii) uncovering a second `condensation' phase
transition in the structure of the solution set for k larger or equal than 4.
These results both follow from computing the large deviation rate of the
internal entropy of pure states. From a technical point of view our main
contributions are a simplified version of the cavity formalism for special
values of the Parisi replica symmetry breaking parameter m (in particular for
m=1 via a correspondence with the tree reconstruction problem) and new large-k
expansions.