Both the Energy Recovery Linac (ERL) and Free Electron laser (FEL) are
considered to be candidates of the fourth generation light source. It is
proposed to combine FEL into an ERL facility to integrate the advantages of
both ERL and FEL, and to realize a compact two-purpose light source. A test
facility to verify this principle is being designed at the Institute of High
Energy Physics, Beijing. One main concern is the beam breakup (BBU) instability
which limits the available beam current. To this end, we developed a numerical
simulation code to calculate the BBU threshold, which is found to have only a
small reduction even in a high-FEL-bunch-charge operation mode, compared with
that in the case with ERL bunches only. However, even with ERL beam current far
below BBU threshold, we observed a fluctuation of the central orbit of the ERL
bunches in the presence of FEL beam. We then present a physical model of BBU
and understand the mechanism of the orbit-fluctuation in an ERL-FEL two-purpose
machine. We found that by choosing an appropriate FEL bunch repetition rate,
the central orbit fluctuation amplitude can be well controlled.