We investigate the dependence of stellar properties on the mean thermal Jeans
mass in molecular clouds. We compare the results from the two largest
hydrodynamical simulations of star formation to resolve the fragmentation
process down to the opacity limit, the first of which was reported by Bate,
Bonnell & Bromm. The initial conditions of the two calculations are identical
except for the radii of the clouds, which are chosen so that the mean densities
and mean thermal Jeans masses of the clouds differ by factors of nine and
three, respectively. We find that the denser cloud, with the lower mean thermal
Jeans mass, produces a higher proportion of brown dwarfs and has a lower
characteristic (median) mass of the stars and brown dwarfs. This dependence of
the initial mass function (IMF) on the density of the cloud may explain the
observation that the Taurus star-forming region appears to be deficient in
brown dwarfs when compared with the Orion Trapezium cluster. The new
calculation also produces wide binaries (separations >20 AU), one of which is a
wide binary brown dwarf system. Based on the hydrodynamical calculations, we
develop a simple accretion/ejection model for the origin of the IMF. In the
model, all stars and brown dwarfs begin with the same mass (set by the opacity
limit for fragmentation) and grow in mass until their accretion is terminated
stochastically by their ejection from the cloud through dynamically
interactions. The model predicts that the main variation of the IMF in
different star-forming environments should be in the location of the peak (due
to variations in the mean thermal Jeans mass of the cloud) and in the
substellar regime. However, the slope of the IMF at high-masses may depend on
the dispersion in the accretion rates of protostars.