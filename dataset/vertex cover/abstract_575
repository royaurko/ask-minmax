We study the vertex algebras associated with modular invariant
representations of affine Kac-Moody algebras at fractional levels, whose simple
highest weight modules are classified by Joseph's characteristic varieties. We
show that an irreducible highest weight representation of a non-twisted affine
Kac-Moody algebra at an admissible level k is a module over the associated
simple affine vertex algebra if and only if it is an admissible representation
whose integral root system is isomorphic to that of the vertex algebra itself.
This in particular proves the conjecture of Adamovic and Milas on the
rationality of admissible affine vertex algebras in the category O.