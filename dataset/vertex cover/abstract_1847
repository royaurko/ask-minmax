We introduce certain correlation functions (graded $q$--traces) associated to
vertex operator algebras and superalgebras which we refer to as $n$--point
functions. These naturally arise in the studies of representations of Lie
algebras of differential operators on the circle \cite{Le1}--\cite{Le2},
\cite{M}. We investigate their properties and consider the corresponding graded
$q$--traces in parallel with the passage from genus 0 to genus 1 conformal
field theory. By using the vertex operator algebra theory we analyze in detail
correlation functions in some particular cases. We obtain elliptic
transformation properties for $q$--traces and the corresponding $q$--difference
equations. In particular, our construction leads to correlation functions and
$q$--difference equations investigated by S. Bloch and A. Okounkov \cite{BO}.