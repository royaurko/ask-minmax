We derive the spectra of the cosmic X-ray background (CXB) and of the
Galactic ridge X-ray emission (GRXE) in the ~20-200 keV range from the data of
the IBIS instrument aboard the INTEGRAL satellite obtained during the four
dedicated Earth-occultation observations of early 2006. We analyse the
modulation of the IBIS/ISGRI detector counts induced by the passage of the
Earth through the field of view of the instrument. Unlike previous studies, we
do not fix the spectral shape of the various contributions, but model instead
their spatial distribution and derive for each of them the expected modulation
of the detector counts. The spectra of the diffuse emission components are
obtained by fitting the normalizations of the model lightcurves to the observed
modulation in different energy bins. The obtained CXB spectrum is consistent
with the historic HEAO-1 results and falls slightly below the spectrum derived
with Swift/BAT. A 10% higher normalization of the CXB cannot be completely
excluded, but it would imply an unrealistically high albedo of the Earth. The
derived spectrum of the GRXE confirms the presence of a minimum around 80 keV
with improved statistics and yields an estimate of ~0.6 M_Sun for the average
mass of white dwarfs in the Galaxy. The analysis also provides updated
normalizations for the spectra of the Earth's albedo and the cosmic-ray induced
atmospheric emission.