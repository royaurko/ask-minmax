The relation between galaxy luminosity L and halo virial velocity v_vir
required to fit the galaxy luminosity function differs from the observed
Tully-Fisher relation between L and disc speed v_rot. Hence the problem of
reproducing the galaxy luminosity function and the Tully-Fisher relation
simultaneously has plagued semianalytic models since their inception. Here we
study the relation between v_rot and v_vir by fitting observational average
rotation curves of disc galaxies binned in luminosity. We show that the v_rot -
v_vir relation that we obtain in this way can fully account for this seeming
inconsistency. Therefore, the reconciliation of the luminosity function with
the Tully-Fisher relation rests on the complex dependence of v_rot on v_vir,
which arises because the ratio of stellar mass to dark matter mass is a strong
function of halo mass.