Let 2<n\leq l<m< \omega. Let L_n denote first order logic restricted to the
first n variables. We show that the omitting types theorem fails dramatically
for the n--variable fragments of first order logic with respect to clique
guarded semantics, and for its packed n--variable fragments. Both are modal
fragments of L_n. As a sample, we show that if there exists a finite relation
algebra with a so--called strong l--blur, and no m--dimensional relational
basis, then there exists a countable, atomic and complete L_n theory T and type
\Gamma, such that \Gamma is realizable in every so--called m--square model of
T, but any witness isolating \Gamma cannot use less than $l$ variables. An
$m$--square model M of T gives a form of clique guarded semantics, where the
parameter m, measures how locally well behaved M is. Every ordinary model is
k--square for any n<k<\omega, but the converse is not true. Any model M is
\omega--square, and the two notions are equivalent if M is countable.
  Such relation algebras are shown to exist for certain values of l and m like
for n\leq l<\omega and m=\omega, and for l=n and m\geq n+3. The case l=n and
m=\omega gives that the omitting types theorem fails for L_n with respect to
(usual) Tarskian semantics: There is an atomic countable L_n theory T for which
the single non--principal type consisting of co--atoms cannot be omitted in any
model M of T.
  For n<\omega, positive results on omitting types are obained for L_n by
imposing extra conditions on the theories and/or the types omitted. Positive
and negative results on omitting types are obtained for infinitary variants and
extensions of L_{\omega, \omega}.