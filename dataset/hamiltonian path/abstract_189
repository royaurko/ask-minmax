We review the concept of superfluidity and, based on real and thought
experiments, we use the formalism of second quantization to derive expressions
that allow the calculation of the superfluid density for general Hamiltonians
with path-integral methods. It is well known that the superfluid density can be
related to the response of the free energy to a boundary phase-twist, or to the
fluctuations of the winding number. However, we show that this is true only for
a particular class of Hamiltonians. In order to treat other classes, we derive
general expressions of the superfluid density that are valid for various
Hamiltonians. While the winding number is undefined when the number of
particles is not conserved, our general expressions allow us to calculate the
superfluid density in all cases. We also provide expressions of the superfluid
densities associated to the individual components of multi-species
Hamiltonians, which remain valid when inter-species conversions occur. The
cases of continuous and discrete spaces are discussed, and we emphasize common
mistakes that occur when considering lattices with non-orthonormal primitive
vectors.