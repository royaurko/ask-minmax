Using worldsheet Hamiltonian methods we derive a charge algebra which
generalizes the Courant bracket to include fluxes of general index type. This
is achieved by coupling a bi-vector to the Hamiltonian of the Polyakov model.
This bracket is useful to describe so-called non-geometric backgrounds and has
been discussed in the mathematics literature by Dmitry Roytenberg.