In financial markets, the order flow, defined as the process assuming value
one for buy market orders and minus one for sell market orders, displays a very
slowly decaying autocorrelation function. Since orders impact prices,
reconciling the persistence of the order flow with market efficiency is a
subtle issue. A possible solution is provided by asymmetric liquidity, which
states that the impact of a buy or sell order is inversely related to the
probability of its occurrence. We empirically find that when the order flow
predictability increases in one direction, the liquidity in the opposite side
decreases, but the probability that a trade moves the price decreases
significantly. While the last mechanism is able to counterbalance the
persistence of order flow and restore efficiency and diffusivity, the first
acts in opposite direction. We introduce a statistical order book model where
the persistence of the order flow is mitigated by adjusting the market order
volume to the predictability of the order flow. The model reproduces the
diffusive behaviour of prices at all time scales without fine-tuning the values
of parameters, as well as the behaviour of most order book quantities as a
function of the local predictability of order flow.