We develop the differential geometric and geometric analytic studies of
Hamiltonian systems. Key ingredients are the curvature operator, the weighted
Laplacian, and the associated Riccati equation. We prove the appropriate
generalizations of Bochner--Weitzenb\"ock formula and Laplacian comparison
theorem, and study the heat flow.