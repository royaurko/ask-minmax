We prove a substantial part of a conjecture of Kontsevich and Zorich on the
Lyapunov exponents of the Teichmuller geodesic flow on the deviation of ergodic
averages for generic conservative flows on higher genus surfaces. The result on
the Teichmuller flow is formulated in terms of a (symplectic) cocycle on the
real cohomology bundle over the moduli space of holomorphic differentials
introduced by Kontsevich and Zorich. We prove that such a cocycle is
non-uniformly hyperbolic, that is, all of its Lyapunov exponents are different
from zero. In particular, the number of strictly positive exponents is equal to
the genus of the surface. From this theorem we derive that ergodic integrals of
smooth functions for generic area-preserving flows on higher genus surfaces
grow with time according to a power-law asymptotics with a number of terms
equal to the genus of the surface and stricltly positive exponents equal to the
non-negative Lyapunov exponents of the Kontsevich-Zorich cocycle. In
particular, for conservative flows on surfaces of higher genus, the deviation
of ergodic averages for a generic smooth function obeys a power law with a
strictly positive exponent and, consequently, the Denjoy-Koksma inequality does
not hold. The derivation of the deviation theorem relies in a fundamental way
on the notion of invariant distribution for flows on surfaces and the related
notion of basic current for the orbit foliation.