We study a 3D model of driven vortices in weakly coupled layered
superconductors with strong pinning. Above the critical force $F_c$, we find a
plastic flow regime in which pancakes in different layers are uncoupled,
corresponding to a pancake gas. At a higher $F$, there is an ``smectic flow''
regime with short-range interlayer order, corresponding to an entangled line
liquid. Later, the transverse displacements freeze and vortices become
correlated along the c-axis, resulting in a transverse solid. Finally, at a
force $F_s$ the longitudinal displacements freeze and we find a coherent solid
of rigid lines.