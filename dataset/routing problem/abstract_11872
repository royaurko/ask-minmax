We address the problem of portfolio optimization under the simplest coherent
risk measure, i.e. the expected shortfall. As it is well known, one can map
this problem into a linear programming setting. For some values of the external
parameters, when the available time series is too short, the portfolio
optimization is ill posed because it leads to unbounded positions, infinitely
short on some assets and infinitely long on some others. As first observed by
Kondor and coworkers, this phenomenon is actually a phase transition. We
investigate the nature of this transition by means of a replica approach.