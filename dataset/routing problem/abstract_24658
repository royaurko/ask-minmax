Colouring sparse graphs under various restrictions is a theoretical problem
of significant practical relevance. Here we consider the problem of maximizing
the number of different colours available at the nodes and their
neighbourhoods, given a predetermined number of colours. In the analytical
framework of a tree approximation, carried out at both zero and finite
temperatures, solutions obtained by population dynamics give rise to estimates
of the threshold connectivity for the incomplete to complete transition, which
are consistent with those of existing algorithms. The nature of the transition
as well as the validity of the tree approximation are investigated.