It has recently been shown that the correct halo mass function high mass
behaviour may be obtained by an appropriate treatment of the all-mass-at-center
problem. Here we show that the treatment of this problem leads to an
accumulated mass fraction, F, which is not a universal function of the linear
variance of the density contrast, but depends also on the shape of the power
spectrum. For relevant power spectra F is a universal function of two
quantities: the linear variance and a quantity related to the local shape (at
the given mass scale) of the power spectrum. This implies, for a given shape of
the power spectrum, a redshift dependence of the mass function, which is quite
important for a cold dark matter power spectrum. Our results are in good
agreement with numerical simulations.