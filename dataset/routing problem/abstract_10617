I consider the puzzles arising from four interrelated problems involving
`anthropic' reasoning, and in particular the `Self-Sampling Assumption' (SSA) -
that one should reason as if one were randomly chosen from the set of all
observers in a suitable reference class. The problem of Freak Observers might
appear to force acceptance of SSA if any empirical evidence is to be credited.
The Sleeping Beauty problem arguably shows that one should also accept the
`Self-Indication Assumption' (SIA) - that one should take one's own existence
as evidence that the number of observers is more likely to be large than small.
But this assumption produces apparently absurd results in the Presumptuous
Philosopher problem. Without SIA, however, a definitive refutation of the
counterintuitive Doomsday Argument seems difficult. I show that these problems
are satisfyingly resolved by applying the principle that one should always
condition on all evidence - not just on the fact that you are an intelligent
observer, or that you are human, but on the fact that you are a human with a
specific set of memories. This `Full Non-indexical Conditioning' (FNC) approach
usually produces the same results as assuming both SSA and SIA, with a
sufficiently broad reference class, while avoiding their ad hoc aspects. I
argue that the results of FNC are correct using the device of hypothetical
``companion'' observers, whose existence clarifies what principles of reasoning
are valid. I conclude by discussing how one can use FNC to infer how densely we
should expect intelligent species to occur, and by examining recent anthropic
arguments in inflationary and string theory cosmology.