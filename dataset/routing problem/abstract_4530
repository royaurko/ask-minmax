We study the double obstacle problem for p-harmonic functions on arbitrary
bounded nonopen sets E in quite general metric spaces. The Dirichlet and single
obstacle problems are included as special cases. We obtain Adams' criterion for
the solubility of the single obstacle problem and establish connections with
fine potential theory. We also study when the minimal p-weak upper gradient of
a function remains minimal when restricted to a nonopen subset. Most of the
results are new for open E (apart from those which are trivial in this case)
and also on R^n.