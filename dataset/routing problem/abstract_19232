The commutator length of a Hamiltonian diffeomorphism $f\in \mathrm{Ham}(M,
\omega)$ of a closed symplectic manifold $(M,\omega)$ is by definition the
minimal $k$ such that $f$ can be written as a product of $k$ commutators in
$\mathrm{Ham}(M, \omega)$. We introduce a new invariant for Hamiltonian
diffeomorphisms, called the $k_+$-area, which measures the "distance", in a
certain sense, to the subspace $\mathcal{C}_k$ of all products of $k$
commutators. Therefore this invariant can be seen as the obstruction to writing
a given Hamiltonian diffeomorphism as a product of $k$ commutators. We also
consider an infinitesimal version of the commutator problem: what is the
obstruction to writing a Hamiltonian vector field as a linear combination of
$k$ Lie brackets of Hamiltonian vector fields? A natural problem related to
this question is to describe explicitly, for every fixed $k$, the set of linear
combinations of $k$ such Lie brackets. The problem can be obviously
reformulated in terms of Hamiltonians and Poisson brackets. For a given Morse
function $f$ on a symplectic Riemann surface $M$ (verifying a weak genericity
condition) we describe the linear space of commutators of the form $\{f,g\}$,
with $g\in\mathcal{C}^\infty(M,\mathbb{R})$.