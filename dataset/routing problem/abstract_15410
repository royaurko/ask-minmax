Based on a carefully constructed sample of dwarf stars, a new optical-near
infrared photometric calibration to estimate the metallicity of late-type K and
early-to-mid-type M dwarfs is presented. The calibration sample has two parts;
the first part includes 18 M dwarfs with metallicities determined by
high-resolution spectroscopy and the second part contains 49 dwarfs with
metallicities obtained through moderate-resolution spectra. By applying this
calibration to a large sample of around 1.3 million M dwarfs from the Sloan
Digital Sky Survey and the Two-Micron All Sky Survey, the metallicity
distribution of this sample is determined and compared with those of previous
studies. Using photometric parallaxes, the Galactic heights of M dwarfs in the
large sample are also estimated. Our results show that stars farther from the
Galactic plane, on average, have lower metallicity, which can be attributed to
the age-metallicity relation. A scarcity of metal-poor dwarf stars in the
metallicity distribution relative to the Simple Closed Box Model indicates the
existence of the "M dwarf problem," similar to the previously known G and K
dwarf problems. Several more complicated Galactic chemical evolution models
which have been proposed to resolve the G and K dwarf problems are tested and
it is shown that these models could, to some extent, mitigate the M dwarf
problem as well.