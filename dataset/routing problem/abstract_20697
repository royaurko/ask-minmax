We give a rigorous proof of the representation of implied volatility as a
time-average of weighted expectations of local or stochastic volatility. With
this proof we fix the problem of a circular definition in the original
derivation of Gatheral, who introduced this implied volatility representation
in his book 'The Volatility Surface'.