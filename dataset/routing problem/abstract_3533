The branch displacement problem is a well-known problem in assembler design.
It revolves around the feature, present in several processor families, of
having different instructions, of different sizes, for jumps of different
displacements. The problem, which is provably NP-hard, is then to select the
instructions such that one ends up with the smallest possible program.
  During our research with the CerCo project on formally verifying a C
compiler, we have implemented and proven correct an algorithm for this problem.
In this paper, we discuss the problem, possible solutions, our specific
solutions and the proofs.