We reduce the isomorphism problem for torsion free relatively hyperbolic
groups, to a collection of algorithmic problems on the parabolic subgroups.
Using the arithmetic nature of nilpotent groups we solve these algorithmic
problems and thus solve the isomorphism problem for torsion free relatively
hyperbolic groups with nilpotent parabolic subgroups.
  In previous work, Guirardel and the first contributor initiated a strategy for
solving the isomorphism problem for some rigid relatively hyperbolic groups by
analyzing sequences of Dehn fillings. We generalize this result to classes of
relatively hyperbolic groups that are not rigid, i.e. that have elementary
splittings. New difficulties arise since the parabolic subgroups, which are no
longer forced to be virtually abelian, may have complex conjugacy and
automorphic structures. A main novelty to tackle these difficulties is to use
hyperbolic Dehn fillings and congruence subgroups of the outer automorphism
groups of the parabolic subgroups.