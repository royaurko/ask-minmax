Shortened abstract: Microcanonical equilibrium macrostates are characterized
as the solutions of a constrained minimization problem, while canonical
equilibrium macrostates are characterized as the solutions of a related,
unconstrained minimization problem. In Ellis, Haven, and Turkington (J. Stat.
Phys. 101, 999, 2000) the problem of ensemble equivalence was completely solved
at two separate, but related levels: the level of equilibrium macrostates,
which focuses on relationships between the corresponding sets of equilibrium
macrostates, and the thermodynamic level, which focuses on when the
microcanonical entropy $s$ can be expressed as the Legendre-Fenchel transform
of the canonical free energy. The present paper extends the results of Ellis et
al. significantly by addressing the following motivational question. Given that
the microcanonical ensemble can be nonequivalent with the canonical ensemble,
is it possible to replace the canonical ensemble with a generalized canonical
ensemble that is equivalent with the microcanonical ensemble? The generalized
canonical ensemble that we consider is obtained from the standard canonical
ensemble by adding an exponential factor involving a continuous function $g$ of
the Hamiltonian. As in the paper by Ellis et al., we analyze the equivalence of
the two ensembles at both the level of equilibrium macrostates and the
thermodynamic level. A neat but not quite precise statement of the main result
in the present paper is that the microcanonical and generalized canonical
ensembles are equivalent at the level of equilibrium macrostates if and only if
they are equivalent at the thermodynamic level, which is the case if and only
if the generalized microcanonical entropy $s-g$ is concave.