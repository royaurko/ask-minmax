Context: The HD and H2 molecules play important roles in the cooling of
primordial and very metal-poor gas at high redshift. Aims: Grain surface and
gas phase formation of HD and H2 is investigated to assess the importance of
trace amounts of dust, 10^{-5}-10^{-3} Zo, in the production of HD and H2.
Methods: We consider carbonaceous and silicate grains and include both
physisorption and chemisorption, tunneling, and realistic grain surface
barriers. We find, for a collapsing gas cloud environment with coupled chemical
and thermal balance, that dust abundances as small as 10^{-5} solar lead to a
strong boost in the H2 formation rate due to surface reactions. As a result of
this enhancement in H2, HD is formed more efficiently in the gas phase through
the D+ + H2 reaction. Direct formation of HD on dust grains cannot compete well
with this gas phase process for dust temperatures below 150 K. We also derive
up-to-date analytic fitting formulae for the grain surface formation of H2 and
HD, including the different binding energies of H and D. Results: Grain surface
reactions are crucial to the availability of H2 and HD in very metal-poor
environments. Above metallicities of 10^{-5} solar, the grain surface route
dominates the formation of H2, which in turn, drives the formation of HD in the
gas phase. At dust temperatures above 150 K, laboratory experiments and
theoretical modelling suggest that H2 formation on grains is suppressed while
HD formation on grains is not.