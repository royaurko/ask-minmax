Using Gaussian integral transform techniques borrowed from
functional-integral field theory and the replica trick we derive a version of
the coherent-potential approximation (CPA) suited for describing ($i$) the
diffusive (hopping) motion of classical particles in a random environment and
($ii$) the vibrational properties of materials with spatially fluctuating
elastic coefficients in topologically disordered materials. The effective
medium in the present version of the CPA is not a lattice but a homogeneous and
isotropic medium, representing an amorphous material on a mesoscopic scale. The
transition from a frequency-independent to a frequency-dependent diffusivity
(conductivity) is shown to correspond to the boson peak in the vibrational
model. The anomalous regimes above the crossover are governed by a complex,
frequency-dependent self energy. The boson peak is shown to be stronger for
non-Gaussian disorder than for Gaussian disorder. We demonstrate that the
low-frequency non-analyticity of the off-lattice version of the CPA leads to
the correct long-time tails of the velocity autocorrelation function in the
hopping problem and to low-frequency Rayleigh scattering in the wave problem.
Furthermore we show that the present version of the CPA is capable to treat the
percolative aspects of hopping transport adequately.