The spectral problem $(A + V(z))\psi=z\psi$ is considered where the main
Hamiltonian $A$ is a self-adjoint operator of sufficiently arbitrary nature.
The perturbation $V(z)=-B(A'-z)^{-1}B^{*}$ depends on the energy $z$ as
resolvent of another self-adjoint operator $A'$. The latter is usually
interpreted as Hamiltonian describing an internal structure of physical system.
The operator $B$ is assumed to have a finite Hilbert-Schmidt norm. The
conditions are formulated when one can replace the perturbation $V(z)$ with an
energy-independent ``potential'' $W$ such that the Hamiltonian $H=A +W$ has the
same spectrum (more exactly a part of spectrum) and the same eigenfunctions as
the initial spectral problem. The Hamiltonian $H$ is constructed as a solution
of the non-linear operator equation $H=A+V(H)$. It is established that this
equation is closely connected with the problem of searching for invariant
subspaces of the Hamiltonian
  $ {\bf H}=\left[ \begin{array}{lr} A & B B^{*} & A' \end{array}\right]. $
  The orthogonality and expansion theorems are proved for eigenfunction systems
of the Hamiltonian $ H=A + W $. Scattering theory is developed for this
Hamiltonian in the case where the operator $A$ has continuous spectrum.