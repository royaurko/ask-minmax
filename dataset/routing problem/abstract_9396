We formulate and investigate a general stochastic control problem under a
progressive enlargement of filtration. The global information is enlarged from
a reference filtration and the knowledge of multiple random times together with
associated marks when they occur. By working under a density hypothesis on the
conditional joint distribution of the random times and marks, we prove a
decomposition of the original stochastic control problem under the global
filtration into classical stochastic control problems under the reference
filtration, which are determined in a finite backward induction. Our method
revisits and extends in particular stochastic control of diffusion processes
with finite number of jumps. This study is motivated by optimization problems
arising in default risk management, and we provide applications of our
decomposition result for the indifference pricing of defaultable claims, and
the optimal investment under bilateral counterparty risk. The solutions are
expressed in terms of BSDEs involving only Brownian filtration, and remarkably
without jump terms coming from the default times and marks in the global
filtration.