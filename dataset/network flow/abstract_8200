This paper is a continuation of our earlier work [Z.L. Guo {\it et al.},
Phys. Rev. E {\bf 88}, 033305 (2013)] where a multiscale numerical scheme based
on kinetic model was developed for low speed isothermal flows with arbitrary
Knudsen numbers. In this work, a discrete unified gas-kinetic scheme (DUGKS)
for compressible flows with the consideration of heat transfer and shock
discontinuity is developed based on the Shakhov model with an adjustable
Prandtl number. The method is an explicit finite-volume scheme where the
transport and collision processes are coupled in the evaluation of the fluxes
at cell interfaces, so that the nice asymptotic preserving (AP) property is
retained, such that the time step is limited only by the CFL number, the
distribution function at cell interface recovers to the Chapman-Enskog one in
the continuum limit while reduces to that of free-transport for free-molecular
flow, and the time and spatial accuracy is of second-order accuracy in smooth
region. These features make the DUGKS an ideal method for multiscale
compressible flow simulations. A number of numerical tests, including the shock
structure problem, the Sod tube problem with different degree of
non-equilibrium, and the two-dimensional Riemann problem in continuum and
rarefied regimes, are performed to validate the scheme. The comparisons with
the results of DSMC and other benchmark data demonstrate that the DUGKS is a
reliable and efficient method for multiscale compressible flow computation.