Based on numerical simulations of a three-phase traffic flow model, a
probabilistic theory of traffic at the light signal is developed. We have found
that very complex spatiotemporal self-organized phenomena determine features of
city traffic. We have revealed that the breakdown of {\it green wave} in a city
is initiated by the emergence of a moving synchronized flow pattern (MSP)
within the green wave. It turns out that a sequence of
F$\rightarrow$S$\rightarrow$J transitions (F -- free flow, S -- synchronized
flow, J -- moving queue) lead to traffic breakdown at the light signal. Both
spontaneous and induced breakdowns of the green wave have been found. From a
study of a variety of scenarios for arrival traffic, we have found that there
are the infinite number of capacities of traffic at the light signal, which are
in a capacity range between a minimum capacity and maximum capacity; each of
the capacities gives a flow rate at which under-saturated traffic is in a
metastable state with respect to the transition to over-saturated traffic. The
maximum capacity depends crucially on a time-dependence of the flow rate: The
larger the number of vehicles that arrive the light signal during the green
phase, the larger the maximum capacity.