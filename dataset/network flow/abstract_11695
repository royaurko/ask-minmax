The 2008 financial crisis illustrated the need for a thorough, functional
understanding of systemic risk in strongly interconnected financial structures.
Dynamic processes on complex networks being intrinsically difficult, most
recent studies of this problem have relied on numerical simulations. Here we
report analytical results in a network model of interbank lending based on
directly relevant financial parameters, such as interest rates and leverage
ratios. Using a mean-field approach, we obtain a closed-form formula for the
"critical degree", viz. the number of creditors per bank below which an
individual shock can propagate throughout the network. We relate the failures
distribution (probability that a single shock induces $F$ failures) to the
degree distribution (probability that a bank has $k$ creditors), showing in
particular that the former is fat-tailed whenever the latter is. Our criterion
for the onset of contagion turns out to be isomorphic to the condition for
cooperation to evolve on graphs and social networks, as recently formulated in
evolutionary game theory. This remarkable connection supports recent calls for
a methodological rapprochement between finance and ecology.