Direct numerical simulations of Taylor-Couette flow (TC). Shear Reynolds
numbers of up to $3\cdot10^5$, corresponding to Taylor numbers of
$Ta=4.6\cdot10^{10}$, were reached. Effective scaling laws for the torque are
presented. The transition to the ultimate regime, in which asymptotic scaling
laws (with logarithmic corrections) for the torque are expected to hold up to
arbitrarily high driving, is analysed for different radius ratios $\eta$,
different aspect ratios $\Gamma$ and different rotation ratios $Ro$. It is
shown that the transition is approximately independent of $Ro$ and $\Gamma$,
but depends significantly on $\eta$. We furthermore calculate the local angular
velocity profiles and visualize different flow regimes that depend both on the
shearing of the flow, and the Coriolis force originating from the outer
cylinder rotation. Two main regimes are distinguished, based on the magnitude
of the Coriolis force, namely the co-rotating and weakly counter-rotating
regime dominated by Rayleigh-unstable regions, and the strongly
counter-rotating regime where a mixture of stable and unstable regions exist.
Furthermore, an analogy between $\eta$ and outer-cylinder rotation is revealed,
namely that smaller gaps behave like a wider gap with co-rotating cylinders,
and that wider gaps behave like smaller gaps with weakly counter-rotating
cylinders. Finally, the effect of $\Gamma$ on the effective torque versus $Ta$
scaling is analysed and it is shown that different branches of the
torque-versus-$Ta$ relationships associated to different aspect ratios are
found to cross within $15%$ of the $Re$ associated to the transition to the
ultimate regime. The paper culminates in phase diagram in the inner vs outer
$Re$ number parameter space and in the $Ta$ vs $Ro$ parameter space, which can
be seen as the extension of the Andereck \emph{et al.} phase diagram towards
the ultimate regime.