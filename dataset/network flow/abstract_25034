  This paper addresses a stochastic-flow network in which each arc or node has several capacities and may fail. Given the demand d , we try to evaluate the system reliability that the maximum flow of the network is not less than d . A simple algorithm is proposed firstly to generate all lower boundary points for d , and then the system reliability can be calculated in terms of such points. One computer example is shown to illustrate the solution procedure. Scope and purpose The maximum flow problem is a standard problem in operations research and network analysis (Ford and Fulkerson, Flows in networks. NJ: Princeton University Press, 1962). This paper discusses the maximum flow problem for a stochastic-flow network in which arcs and nodes all have several capacities and may fail. We can evaluate the probability (named system reliability here) that the maximum flow is not less than a given demand, and then treat such a reliability as a system performance index. The purpose of this paper is to provide such a performance index for many real-world systems such as computer systems, telecommunication systems, logistics systems, etc. Keywords Maximum flow ; Node failure ; Stochastic-flow network ; System reliability 1. Introduction In a binary-state network (no flow happens), the network or each component (arc or node) has good/bad states. Assuming each node in the network is perfectly reliable, the system reliability is the probability that source s can communicate with sink t , which can be computed in terms of minimal paths (MPs) by applying inclusion–exclusion rule [1] , [2]  and  [3] or disjoint-event method [4] . In such a network, a minimal path is a sequence of arcs from s to t , which contains no cycle. The system reliability can also be obtained without MPs, for example by applying factorial formula sequentially [5] . Aggarwal et al. [6] extended the binary-state network to node failure case. They proposed a concept that the failure of a node implies the failure of arcs incident from it. Using this concept, the original network with node failure can be modified to be a conventional network with perfect nodes. Then the system reliability can be calculated by the published methods previously. Note that the concept of Aggarwal et al. [6] is only adaptable to a binary-state network. In a binary-state flow network, the capacity of each arc (the maximum flow passing the arc per unit time) has two levels 0 and a positive integer. Given the demand d , the system reliability is the probability that the maximum flow of the network is not less than d . Lee [7] used lexicographic ordering and labeling scheme [8] to calculate the system reliability. Aggarwal et al. [9] solved such a reliability problem in terms of MPs. Without MPs, Rueger [10] extended to the case that nodes as well as arcs all have a positive-integer capacity and may fail. Xue [3] , Lin et al. [11] and Jane et al. [12] supposed that each arc has several states/capacities but each node is perfectly reliable. Such a network is called a stochastic-flow network here. Given the demand d , the system reliability is the probability that the maximum flow of the network is not less than d . Lin et al. [11] proposed an algorithm to generate all lower boundary points for d (named d -MP in Lin et al. [11] ) in terms of MPs. This paper mainly extends the stochastic-flow network to the more general case that nodes as well as arcs all have several states/capacities and may fail. A simple algorithm based on MPs is proposed firstly to find all lower boundary points for d and then calculate the system reliability in terms of such points. The proposed solution procedure can be applied to evaluate the system reliability, one performance index, for real-world systems such as computer systems, telecommunication systems, transportation systems, electric-power transmission systems and logistics systems. An illustrative example is shown in Section 5 . 2. Assumptions The capacity of each component a i is an integer-valued random variable which takes values 0<1<2<⋯< M i according to a given distribution. 2. Flow in G must satisfy the so-called flow-conservation law [8] . 3. The capacities of different components are statistically independent. 3. Stochastic-flow network model Suppose mp 1 , mp 2 ,…, mp m are totally the MPs from s to t . The stochastic-flow network is described in terms of two vectors: capacity vector X =( x 1 , x 2 ,…, x n + p ) and flow vector where x i denotes the (current) capacity of component a i and f j denotes the (current) flow on mp j . Let L j denote the maximum capacity of mp j , i.e., . Then such a vector F is feasible if and only if Lemma 1.