The stable marriage problem with its extensions is a widely studied subject.
In this paper, we combine two topics related to it, setting up new and
generalizing known results in both. The stable flow problem extends the
well-known stable matching problem to network flows. Restricted edges have some
special properties: forced edges must be in the stable solution, while
forbidden edges may not be in it. Free edges are not able to block matchings.
  Here we describe a polynomial algorithm that finds a stable flow with forced
and forbidden edges or proves its nonexistence. In contrast to this, we also
show that determining whether a stable flow with free edges exists, is
NP-complete.