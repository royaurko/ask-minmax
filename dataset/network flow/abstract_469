Middleboxes are special network devices that perform various functions such
as enabling security and efficiency. SDN-based routing approaches in networks
with middleboxes need to address resource constraints, such as memory in the
switches and processing power of middleboxes, and traversal constraint where a
flow must visit the required middleboxes in a specific order. In this work we
propose a solution based on MultiPoint-To-Point Trees (MPTPT) for routing
traffic in SDN-enabled networks with consolidated middleboxes. We show both
theoretically and via simulations that our solution significantly reduces the
number of routing rules in the switches, while guaranteeing optimum throughput
and meeting processing requirements. Additionally, the underlying algorithm has
low complexity making it suitable in dynamic network environment.