We present a new code for performing general-relativistic
radiation-hydrodynamics simulations of accretion flows onto black holes. The
radiation field is treated in the optically-thick approximation, with the
opacity contributed by Thomson scattering and thermal bremsstrahlung. Our
analysis is concentrated on a detailed numerical investigation of hot
two-dimensional, Bondi-Hoyle accretion flows with various Mach numbers. We find
significant differences with respect to purely hydrodynamical evolutions. In
particular, once the system relaxes to a radiation-pressure dominated regime,
the accretion rates become about two orders of magnitude smaller than in the
purely hydrodynamical case, remaining however super-Eddington as are the
luminosities. Furthermore, when increasing the Mach number of the inflowing
gas, the accretion rates become smaller because of the smaller cross section of
the black hole, but the luminosities increase as a result a stronger emission
in the shocked regions. Overall, our approach provides the first
self-consistent calculation of the Bondi-Hoyle luminosity, most of which is
emitted within r~100 M from the black hole, with typical values L/L_Edd ~ 1-7,
and corresponding energy efficiencies eta_BH ~ 0.09-0.5. The possibility of
computing luminosities self-consistently has also allowed us to compare with
the bremsstrahlung luminosity often used in modelling the electromagnetic
counterparts to supermassive black-hole binaries, to find that in the
optically-thick regime these more crude estimates are about 20 times larger
than our radiation-hydrodynamics results.