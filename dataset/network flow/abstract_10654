Modern database clusters entail two levels of networks: connecting CPUs and
NUMA regions inside a single server in the small and multiple servers in the
large. The huge performance gap between these two networks used to slow down
distributed query processing to such an extent that a cluster of machines
actually performed worse than a single many-core server. The increased
main-memory capacity of the cluster remained the sole benefit of such a
scale-out.
  The economic viability of Infiniband and other high-speed interconnects has
changed the game by narrowing the performance gap between these two levels of
networks. Using an integrated approach that optimizes both levels holistically,
it is now possible to achieve scalable distributed query processing. This paper
presents the blueprint for a distributed query engine that is carefully
tailored for both the network in the small and in the large. It consists of two
parts: First, a novel communication multiplexer utilizing remote direct memory
access and low-overhead network scheduling for high-speed communication.
Second, hybrid parallelism that integrates distributed processing seamlessly
with intra-node morsel-driven parallelism, scaling considerably better both
with the number of cores and servers compared to standard exchange operators.
An extensive evaluation of our implementation within the HyPer system using the
TPC-H benchmark shows that our holistic approach indeed enables high-speed
query processing over high-speed networks.