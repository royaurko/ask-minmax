We study the current-phase relation of a Bose-Einstein condensate flowing
through a repulsive square barrier by solving analytically the one dimensional
Gross-Pitaevskii equation. The barrier height and width fix the current-phase
relation $j(\delta\phi)$, which tends to $j\sim\cos(\delta\phi/2)$ for weak
barriers and to the Josephson sinusoidal relation $j\sim\sin(\delta\phi)$ for
strong barriers. Between these two limits, the current-phase relation depends
on the barrier width. In particular, for wide enough barriers, we observe two
families of multivalued current-phase relations. Diagrams belonging to the
first family, already known in the literature, can have two different positive
values of the current at the same phase difference. The second family, new to
our knowledge, can instead allow for three different positive currents still
corresponding to the same phase difference. Finally, we show that the
multivalued behavior arises from the competition between hydrodynamic and
nonlinear-dispersive components of the flow, the latter due to the presence of
a soliton inside the barrier region.