We study the flow of a quasi-one-dimensional Bose-Einstein condensate
incident onto a narrow obstacle. We consider a configuration in which a
dispersive shock is formed and propagates upstream away from the obstacle while
the downstream flow reaches a supersonic velocity, generating a sonic horizon.
Conditions for obtaining this regime are explicitly derived and the accuracy of
our analytical results is confirmed by numerical simulations.