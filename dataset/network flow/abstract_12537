We present our ``Zero Energy Network'' (ZEN) protocol stack for energy
harvesting wireless sensor networks applications. The novelty in our work is
$4$ fold: (1) Energy harvesting aware fully featured MAC layer. Carrier
sensing, Backoff algorithms, ARQ, RTS/CTS mechanisms, Adaptive Duty Cycling are
either auto configurable or available as tunable parameters to match the
available energy (b) Energy harvesting aware Routing Protocol. The multi-hop
network establishes routes to the base station using a modified version of
AODVjr routing protocol assisted by energy predictions. (c) Application of a
time series called ``Holt-Winters'' for predicting the incoming energy. (d) A
distributed smart application running over the ZEN stack which utilizes a multi
parameter optimized perturbation technique to optimally use the available
energy. The application is capable of programming the ZEN stack in an energy
efficient manner. The energy harvested distributed smart application runs on a
realistic solar energy trace with a three year seasonality database. We
implement a smart application, capable of modifying itself to suit its own as
well as the network's energy level. Our analytical results show a close match
with the measurements conducted over EHWSN testbed.