We present a reformulation of modularity that allows the analysis of the
community structure in networks of correlated data. The new modularity
preserves the probabilistic semantics of the original definition even when the
network is directed, weighted, signed, and has self-loops. This is the most
general condition one can find in the study of any network, in particular those
defined from correlated data. We apply our results to a real network of
correlated data between stores in the city of Lyon (France).