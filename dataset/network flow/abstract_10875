Consider a selfadjoint unbounded operator D on a Hilbert space H and a one
parameter norm continuous family of selfadjoint bounded operators {A(t)}
parametrized by the real line. Then under certain conditions \cite{RS95} that
include the assumption that the operators {D(t)= D+A(t)} all have discrete
spectrum then the spectral flow along the path { D(t)} can be shown to be equal
to the index of d/dt+D(t) when the latter is an unbounded Fredholm operator on
L^2(R, H). In \cite{GLMST11} an investigation of the index=spectral flow
question when the operators in the path may have some essential spectrum was
started but under restrictive assumptions that rule out differential operators
in general. In \cite{CGPST14a} the question of what happens when the Fredholm
condition is dropped altogether was investigated. In these circumstances the
Fredholm index is replaced by the Witten index.
  In this paper we take the investigation begun in \cite{CGPST14a} much
further. We show how to generalise a formula known from the setting of the L^2
index theorem to the non-Fredholm setting. Our main theorem gives a trace
formula relating the homological index of \cite{CaKa:TIH} to an integral
formula that is known, for a path of selfadjoint Fredholms with compact
resolvent and with unitarily equivalent endpoints, to compute spectral flow.
Our formula however, applies to paths of selfadjoint non-Fredholm operators. We
interpret this as indicating there is a generalisation of spectral flow to the
non-Fredholm setting.