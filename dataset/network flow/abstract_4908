According to DiPerna-Lions theory, velocity fields with weak derivatives in
$L^p$ spaces possess weakly regular flows. When a velocity field is perturbed
by a white noise, the corresponding (stochastic) flow is far more regular in
spatial variables; a $d$-dimensional diffusion with a drift in $L^{r,q}$ space
($r$ for the spatial variable and $q$ for the temporal variable) possesses weak
derivatives with stretched exponential bounds, provided that $r/d+2/q<1$. As an
application we show that a Hamiltonian system that is perturbed by a white
noise produces a symplectic flow provided that the corresponding Hamiltonian
function $H$ satisfies
  $\nabla H\in L^{r,q}$ with $r/d+2/q<1$. As our second application we derive a
Constantin-Iyer type circulation formula for certain weak solutions of
Navier-Stokes equation.