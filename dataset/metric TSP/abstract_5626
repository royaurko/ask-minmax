We study formation of black holes in the Friedmann universe. We present a
formulation of the Einstein equations under the constant mean curvature
time-slicing condition. Our formalism not only gives us the analytic solution
of the perturbation equations for non-linear density and metric fluctuations on
superhorizon scales, but also allows us to carry out a numerical relativity
simulation for black hole formation after the scale of the density fluctuations
is well within the Hubble horizon scale. We perform a numerical simulation of
spherically symmetric black hole formation in the radiation-dominated,
spatially flat background universe for a realistic initial condition supplied
from the analytic solution. It is found that the initial metric perturbation
has to be non-linear (the maximum value of 3D conformal factor $\psi_0$ at
$t=0$ should be larger than $\sim 1.4$) for a black hole to be formed, but the
threshold amplitude for black hole formation and the final black hole mass
considerably depend on the initial density (or metric) profile of the
perturbation: The threshold value of $\psi_0$ at $t=0$ for formation of a black
hole is smaller for a high density peak surrounded by a low density region than
for that surrounded by the average density region of the flat universe. This
suggests that it is necessary to take into account the spatial correlation of
density fluctuations in the study of primordial black hole formation.