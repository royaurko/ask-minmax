We first provide an alternative proof of the classical Weitzneb\"ock formula
for Einstein four-manifolds using Berger curvature decomposition, motivated by
which we establish a unified framework for a Weitzenb\"ock formula for a large
class of canonical metrics on four-manifolds (or a Weitzenb\"ock formula for
"Einstein metrics" on four-dimensional smooth metric measure spaces). As
applications, we classify Einstein four-manifolds of half two-nonnegative
curvature operator, which in some sense provides a characterization of
K\"ahler-Einstein metrics with positive scalar curvature on four-manifolds, we
also discuss four-manifolds of half two-nonnegative curvature operator and half
harmonic Weyl curvature.