We find a class of metric structures which do not admit bilipschitz
embeddings into Banach spaces with the Radon-Nikod\'ym property. Our proof
relies on Chatterji's (1968) martingale characterization of the RNP and does
not use the Cheeger's (1999) metric differentiation theory. The class includes
the infinite diamond and both Laakso (2000) spaces. We also show that for each
of these structures there is a non-RNP Banach space which does not admit its
bilipschitz embedding.
  We prove that a dual Banach space does not have the RNP if and only if it
admits a bilipschitz embedding of the infinite diamond.
  The paper also contains related characterizations of reflexivity and the
infinite tree property.