We prove the equivalence of the curvature-dimension bounds of
Lott-Sturm-Villani (via entropy and optimal transport) and of Bakry--\'Emery
(via energy and \Gamma_2$-calculus) in complete generality for infinitesimally
Hilbertian metric measure spaces. In particular, we establish the full Bochner
inequality on such metric measure spaces. Moreover, we deduce new contraction
bounds for the heat flow on Riemannian manifolds and on mms in terms of the
$L^2$-Wasserstein distance.