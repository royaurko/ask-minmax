We give a Riccati type formula adapted for two metrics having the same
geodesics rays starting from a point or orthogonal to an hypersurface, one of
these metrics being a warped product if the dimension $n$ is greater than or
equal to 3. This formula has non-trivial geometric consequences such as a
positive mass type theorem and other rigidity results. We also apply our result
to some standard models.