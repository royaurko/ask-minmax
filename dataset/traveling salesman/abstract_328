Password: In the probabilistic traveling salesman problem (PTSP), customers require a visit with a given probability, and the best solution is the tour through all customers with the lowest expected final tour cost. The PTSP is an important problem, both operationally and strategically, but is quite difficult to solve with realistically sized problem instances. One alternative is to aggregate customers into regions and solve the PTSP on the reduced problem. This approach raises questions such as how to best divide customers into regions and what scale is necessary to represent the full objective. This paper addresses these questions and presents computational results from experiments with both uniformly distributed and clustered data sets. The focus is on large problem instances where customers have a low probability of requiring a visit and the CPU time available is quite limited. For this class of instances, aggregation can yield very tight estimates of the full objective very quickly, and solving an aggregated form of the problem first can often lead to full solutions with lower expected costs. Keywords Traveling salesman ; Probabilistic traveling salesman ; Aggregation 1. Introduction For many companies, only a subset of customers require a pickup or delivery each day. Information may not be available far enough in advance to create optimal schedules each day for those customers that require a visit or the cost to acquire sufficient computational power to find such solutions may be prohibitive. For these reasons, it is not unusual to design a distance minimizing tour containing all customers, and each day follow the ordering of this a priori tour to visit only the realized customers. Such a practice has been documented, for example, for the delivery of Meals on Wheels in Atlanta by Bartholdi et al. [1] . These a priori tours also create a regularity of service that can be beneficial for both the customers and the drivers. Customers will be served at roughly the same time each day they require service, and the drivers can become very familiar with their routes. Starting from such a tour can be useful, too, as a starting point for reoptimization if there is time available on the day of service. The expected value of these tours can be used strategically as an estimate of the resources required to serve a set of customers. For example, in the motivating problem for [2] , a market survey identified the probability that customers in the service area will request a delivery, and the expected tour cost served as an estimate of the time and resources required to serve the customers. Thus, these a priori tours can be very useful both operationally and strategically, but finding optimal, or even good, tours can be quite challenging if the number of potential customers is large. Due to the probabilistic nature of the problem, evaluating a proposed schedule can be quite expensive, so large problems are hard to solve even a priori when time is usually less of an issue. We became interested in probabilistic routing problems as a result of our study of home delivery problems (HDP) [3]  and  [4] . In this study, which was inspired by e-grocers, issues addressed include how to charge a customer for a delivery based on the estimated cost of serving the customer. Because costs are primarily determined by the routing of the delivery trucks, the marginal cost of serving a particular customer is highly influenced by whether or not its neighbors receive a delivery as well. If an order is received early in the ordering window, estimating the cost to serve a particular customer can reasonably be based on projections of later orders if we have some knowledge of the probability of other customers placing an order. In evaluating algorithms for solving this variation of the probabilistic traveling salesman problem (PTSP), we found that the few existing algorithms for the PTSP can be prohibitively expensive and time consuming for realistically sized problem instances. For on-line grocery services, for example, a particular depot may be responsible for serving many square miles representing at least hundreds, but probably thousands, of customers. Also, with new orders arriving and information about the customers continually being updated, these PTSPs need to be re-solved fairly often. Many other applications of the PTSP, beyond just grocery delivery, involve large numbers of customers, such as the routing for package delivery services. One approach for all of these applications is to aggregate customers into delivery regions, but how to properly aggregate customers and integrate this into a solution methodology is not clear. Aggregation refers to grouping customers together and then representing them by one point spatially and, in this context, with a single probability value. Pre-existing aggregation is readily available in the form of city blocks, postal zip codes, tracts, census blocks, etc. and is used widely in marketing and facility location. There has been little analysis, theoretical or computational, though, on how aggregation can be used in solving routing problems or how aggregation can impact solution quality, especially in a probabilistic context. This paper takes a step in this direction. One clear benefit of aggregation is the reduction in the a priori problem size. We are particularly interested in applications where there is a limited amount of time available to solve the PTSP, so it will be interesting to evaluate the tradeoff between considering the full problem vs. solving a smaller, aggregated form when time is constrained. This will be one focus of our study. In aggregating customers, there are many choices to make in terms of how to divide customers into regions and how many regions to create. A second focus of our study will be to evaluate the relationship between the level and type of aggregation and the resulting PTSP objective value. This paper is organized as follows. In the next section, we review the relevant literature in this area. Section 3 discusses how to reformulate the PTSP to account for aggregation, Section 4 defines the aggregation schemes to be evaluated, and Section 5 describes a related error result. Section 6 introduces the design of the computational experiments and presents results for uniformly distributed and clustered data sets. Finally, conclusions and insights are offered in Section 7 . 2. Literature review Patrick Jaillet's dissertation [5] introduces the PTSP and demonstrates some interesting properties of optimal tours including the fact that such a tour may intersect itself. He summarizes key results in [6] , where he provides a formulation for the expected value of a tour and bounds the relationship between optimal PTSP and TSP solutions. Berman and Simchi-Levi [7] focus on instances of the PTSP with heterogeneous probabilities, where most of Jaillet's results involve homogeneous probabilities. They establish a lower bound for such instances and explain how to combine this bound with a branch-and-bound algorithm to find an optimal a priori tour. They do not provide any computational results, but it is unlikely such an approach would work well with large problem instances. Rossi and Gavioli [8] discuss how to modify construction heuristics for the TSP specifically to solve the PTSP. Their heuristics are based on Clarke and Wright and nearest neighbor techniques and do not include any local improvement. The expected costs of the resulting solutions are compared with those found using basic TSP heuristics. Based on their computational experiments, the authors conclude that it is important to use solution techniques specifically developed for the PTSP if the number of customers is greater than 50 and the probability of each customer requiring a visit is less than 60%. In [9] , Bertsimas and Howell explore the use of TSP heuristics for solving the PTSP and propose an algorithm for the PTSP based on constructing an initial solution using the spacefilling curve heuristic [10] followed by local search. Variations of the 2-OPT and 1-Shift techniques developed for the TSP in [11] are introduced that compute the change in objective in an expected value sense. The equations presented in [9] to efficiently compute these improvements have been shown to have small errors [12] , but even with these small errors, the authors are able to show improvement based on expected value becomes more important as n n (the number of customers) becomes large. They also find that expected value based local improvement is particularly important when probability values are significantly less than 1. This confirms the results established by Rossi and Gavioli [8] . There have been recent efforts to speed up local search procedures for the PTSP and closely related problems. In [13] , Tang and Miller-Hooks introduce approximate expressions for the PTSP and explain how these can be incorporated in algorithmic approaches. Beraldi et al. [14] have developed efficient neighborhood search techniques for the PTSP with pickup and deliveries which apply to the PTSP. Algorithms are also emerging based on sophisticated metaheuristics. These include an evolutionary algorithm [15] , a stochastic annealing approach [16] , and ant colony metaheuristics [17]  and  [18] . An exact approach was introduced in [19] , but computational tests indicate success only with instances of 50 customers or less. The authors found that among the instances studied, it was much harder to solve instances with low individual probability values.