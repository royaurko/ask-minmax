We investigate exponential sums over those numbers $\leq x$ all of whose
prime factors are $\leq y$. We prove fairly good minor arc estimates, valid
whenever $\log^{3}x \leq y \leq x^{1/3}$. Then we prove sharp upper bounds for
the $p$-th moment of (possibly weighted) sums, for any real $p > 2$ and
$\log^{C(p)}x \leq y \leq x$. Our proof develops an argument of Bourgain,
showing this can succeed without strong major arc information, and roughly
speaking it would give sharp moment bounds and restriction estimates for any
set sufficiently factorable relative to its density.
  By combining our bounds with major arc estimates of Drappeau, we obtain an
asymptotic for the number of solutions of $a+b=c$ in $y$-smooth integers less
than $x$, whenever $\log^{C}x \leq y \leq x$. Previously this was only known
assuming the Generalised Riemann Hypothesis. Combining them with transference
machinery of Green, we prove Roth's theorem for subsets of the $y$-smooth
numbers, whenever $\log^{C}x \leq y \leq x$. This provides a deterministic set,
of size $\approx x^{1-c}$, inside which Roth's theorem holds.