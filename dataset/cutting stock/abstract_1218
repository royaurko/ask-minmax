We develop a new method for deriving local laws for a large class of random
matrices. It is applicable to many matrix models built from sums and products
of deterministic or independent random matrices. In particular, it may be used
to obtain local laws for matrix ensembles that are \emph{anisotropic} in the
sense that their resolvents are well approximated by deterministic matrices
that are not multiples of the identity. For definiteness, we present the method
for sample covariance matrices of the form $Q := T X X^* T^*$, where $T$ is
deterministic and $X$ is random with independent entries. We prove that with
high probability the resolvent of $Q$ is close to a deterministic matrix, with
an optimal error bound and down to optimal spectral scales.
  As an application, we prove the edge universality of $Q$ by establishing the
Tracy-Widom-Airy statistics of the eigenvalues of $Q$ near the soft edges. This
result applies in the single-cut and multi-cut cases. Further applications
include the distribution of the eigenvectors and an analysis of the outliers
and BBP-type phase transitions in finite-rank deformations; they will appear
elsewhere.
  We also apply our method to Wigner matrices whose entries have arbitrary
expectation, i.e. we consider $W+A$ where $W$ is a Wigner matrix and $A$ a
Hermitian deterministic matrix. We prove the anisotropic local law for $W+A$
and use it to establish edge universality.