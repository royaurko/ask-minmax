We study the high frequency price dynamics of traded stocks by a model of
returns using a semi-Markov approach. More precisely we assume that the
intraday returns are described by a discrete time homogeneous semi-Markov which
depends also on a memory index. The index is introduced to take into account
periods of high and low volatility in the market. First of all we derive the
equations governing the process and then theoretical results have been compared
with empirical findings from real data. In particular we analyzed high
frequency data from the Italian stock market from first of January 2007 until
end of December 2010.