Recent detections of GeV photons in a few GRBs by Fermi-LAT have led to
strong constraints on the bulk Lorentz factor in GRB outflows. To avoid a large
gamma gamma optical depth, minimum values of the Lorentz factor are estimated
to be as high as 800-1200 in some bursts. Here we present a detailed
calculation of the gamma gamma optical depth taking into account both the
geometry and the dynamics of the jet. In the framework of the internal shock
model, we compute lightcurves in different energy bands and the corresponding
spectrum and we show how the limits on the Lorentz factor can be significantly
lowered compared to previous estimates.