The ESA Gaia spacecraft has two Shack-Hartmann wavefront sensors (WFS) on its
focal plane. They are required to refocus the telescope in-orbit due to launch
settings and gravity release. They require bright stars to provide good signal
to noise patterns. The centroiding precision achievable poses a limit on the
minimum stellar brightness required and, ultimately, on the observing time
required to reconstruct the wavefront. Maximum likelihood algorithms have been
developed at the Gaia SOC. They provide optimum performance according to the
Cr\'amer-Rao lower bound. Detailed wavefront reconstruction procedures, dealing
with partial telescope pupil sampling and partial microlens illumination have
also been developed. In this work, a brief overview of the WFS and an in depth
description of the centroiding and wavefront reconstruction algorithms is
provided.