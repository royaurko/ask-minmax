We investigate the accuracy of the slow-roll approximation for calculating
perturbation spectra generated during inflation. The Hamilton-Jacobi formalism
is used to evolve inflationary models with different histories. Models are
identified for which the scalar power spectra computed using the Stewart-Lyth
slow-roll approximation differ from exact numerical calculations using the
Mukhanov perturbation equation. We then revisit the problem of primordial black
holes generated by inflation. Hybrid-type inflationary models, in which the
inflaton is trapped in the minimum of a potential, can produce blue power
spectra and an observable abundance of primordial black holes. However, this
type of model can now be firmly excluded from observational constraints on the
scalar spectral index on cosmological scales. We argue that significant
primordial black hole formation in simple inflation models requires contrived
potentials in which there is a period of fast roll towards the end of
inflation. For this type of model, the Stewart-Lyth formalism breaks down.
Examples of such inflationary models and numerical computations of their scalar
fluctuation spectra are presented.