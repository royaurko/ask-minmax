We present results from high-resolution Tree+SPH simulations of galaxy
clusters and groups, aimed at studying the effect of non-gravitational heating
on the entropy of the ICM. We simulate three systems, having emission-weighted
temperature T=0.6,1 and 3 keV, with spatial resolution better than 1% of the
virial radius. We consider the effect of different prescriptions for
non-gravitational ICM heating, such as SN energy feedback, as predicted by
semi-analytical models of galaxy formation, and two different minimum entropy
floors, S_fl=50 and 100 keV cm^2, imposed at z=3. Simulations with only
gravitational heating nicely reproduce predictions from self-similar ICM
models, while extra heating is shown to break the self-similarity, by a degree
which depends on total injected energy and on cluster mass. We use
observational results on the excess entropy in central regions of galaxy
systems, to constrain the amount of extra-heating required. We find that
setting the entropy floor S_fl=50 keV cm^2, which corresponds to an extra
heating energy of about 1 keV per particle, is able to reproduce the observed
excess of ICM entropy.