Given a positive integer $N$ and real number $\alpha\in [0, 1]$, let
$m(\alpha,N)$ denote the minimum, over all sets $A\subset
\mathbb{Z}/N\mathbb{Z}$ of size at least $\alpha N$, of the normalized count of
3-term arithmetic progressions contained in $A$. A theorem of Croot states that
$m(\alpha,N)$ converges as $N\to\infty$ through the primes, answering a
question of Green. Using recent advances in higher-order Fourier analysis, we
prove an extension of this theorem, showing that the result holds for $k$-term
progressions for general $k$ and further for all systems of integer linear
forms of finite complexity. We also obtain a similar convergence result for the
maximum densities of sets free of solutions to systems of linear equations.
These results rely on a regularity method for functions on finite cyclic groups
that we frame in terms of periodic nilsequences, using in particular some
regularity results of Szegedy (relying on his joint work with Camarena) and
equidistribution results of Green and Tao.