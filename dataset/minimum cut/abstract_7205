Understanding the gas content of high redshift halos is crucial for studying
the formation of the first generation of galaxies and reionization. Recently,
Tseliakhovich & Hirata showed that the relative "stream" velocity between the
dark matter and baryons at the time of recombination - formally a second order
effect, but an unusually large one - can influence the later structure
formation history of the Universe. We quantify the effect of the stream
velocity on the so-called "characteristic mass" - the minimum mass of a dark
matter halo capable of retaining most of its baryons throughout its formation
epoch - using three different high-resolution sets of cosmological simulations
(with separate transfer functions for baryons and dark matter) that vary in box
size, particle number, and the value of the relative velocity between the dark
matter and baryons. In order to understand this effect theoretically, we
generalize the linear theory filtering mass to properly account for the
difference between the dark matter and baryonic density fluctuation evolution
induced by the stream velocity. We show that the new filtering mass provides an
accurate estimate for the characteristic mass, while other theoretical ansatzes
for the characteristic mass are substantially less precise.