We study uncoordinated matching markets with additional local constraints
that capture, e.g., restricted information, visibility, or externalities in
markets. Each agent is a node in a fixed matching network and strives to be
matched to another agent. Each agent has a complete preference list over all
other agents it can be matched with. However, depending on the constraints and
the current state of the game, not all possible partners are available for
matching at all times. For correlated preferences, we propose and study a
general class of hedonic coalition formation games that we call coalition
formation games with constraints. This class includes and extends many recently
studied variants of stable matching, such as locally stable matching, socially
stable matching, or friendship matching. Perhaps surprisingly, we show that all
these variants are encompassed in a class of "consistent" instances that always
allow a polynomial improvement sequence to a stable state. In addition, we show
that for consistent instances there always exists a polynomial sequence to
every reachable state. Our characterization is tight in the sense that we
provide exponential lower bounds when each of the requirements for consistency
is violated. We also analyze matching with uncorrelated preferences, where we
obtain a larger variety of results. While socially stable matching always
allows a polynomial sequence to a stable state, for other classes different
additional assumptions are sufficient to guarantee the same results. For the
problem of reaching a given stable state, we show NP-hardness in almost all
considered classes of matching games.