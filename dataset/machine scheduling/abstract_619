We consider an extension of the classical machine-repair model, where we
assume that the machines, apart from receiving service from the repairman, also
serve queues of products. The extended model can be viewed as a layered
queueing network, where the first layer consists of the queues of products and
the second layer is the ordinary machine-repair model. Since the repair time of
one machine may affect the time the other machine is not able to process
products, the downtimes of the machines are correlated. This correlation leads
to dependence between the queues of products in the first layer. Analysis of
these queue length distributions is hard, since the exact dependence structure
for the downtimes, or the queue lengths, is not known. Therefore, we obtain an
approximation for the complete marginal queue length distribution of any queue
in the first layer, by viewing such a queue as a single server queue with
correlated server downtimes. Under an explicit assumption on the form of the
downtime dependence, we obtain exact results for the queue length distribution
for that single server queue. We use these exact results to approximate the
machine-repair model. We do so by computing the downtime correlation for the
latter model and by subsequently using this information to fine-tune the
parameters we introduced to the single server queue. As a result, we
immediately obtain an approximation for the queue length distributions of
products in the machine-repair model, which we show to be highly accurate by
extensive numerical experiments.