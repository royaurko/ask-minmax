In this paper, we design an analytically and experimentally better online
energy and job scheduling algorithm with the objective of maximizing net profit
for a service provider in green data centers. We first study the previously
known algorithms and conclude that these online algorithms have provable poor
performance against their worst-case scenarios. To guarantee an online
algorithm's performance in hindsight, we design a randomized algorithm to
schedule energy and jobs in the data centers and prove the algorithm's expected
competitive ratio in various settings. Our algorithm is theoretical-sound and
it outperforms the previously known algorithms in many settings using both real
traces and simulated data. An optimal offline algorithm is also implemented as
an empirical benchmark.