We present deviation bounds for self-normalized averages and applications to
estimation with a random number of observations. The results rely on a peeling
argument in exponential martingale techniques that represents an alternative to
the method of mixture. The motivating examples of bandit problems and context
tree estimation are detailed.