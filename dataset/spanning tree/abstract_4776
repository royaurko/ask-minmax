A method of deriving and using merging history trees of dark matter galaxy
haloes directly from pure gravity N-body simulations is presented. This
combines the full non-linearity of N-body simulations with the flexibility of
the semi-analytical approach.
  Merging history trees derived from power-law initial perturbation spectrum
simulations (for indices $n=-2$ and $n=0$) by Warren et al. (1992) are shown.
As an example of a galaxy formation model, these are combined with evolutionary
stellar population synthesis, via simple scaling laws for star formation rates,
showing that if most star formation occurs during merger-induced bursts, then a
nearly flat faint-end slope of the galaxy luminosity function may be obtained
in certain cases.
  Interesting properties of hierarchical halo formation are noted: (1) In a
given model, merger rates may vary widely between individual haloes, and
typically 20%-30% of a halo's mass may be due to infall of uncollapsed
material. (2) Small mass haloes continue to form at recent times: as expected,
the existence of young, low redshift, low metallicity galaxies (e.g., Izotov et
al. 1997) is consistent with hierarchical galaxy formation models. (3) For
$n=-2,$ the halo spatial correlation function can have a very high initial bias
due to the high power on large scales.