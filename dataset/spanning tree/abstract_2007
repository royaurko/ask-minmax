We investigate the genealogical structure of general critical or subcritical
continuous-state branching processes. Analogously to the coding of a discrete
tree by its contour function, this genealogical structure is coded by a
real-valued stochastic process called the height process, which is itself
constructed as a local time functional of a Levy process with no negative
jumps. We present a detailed study of the height process and of an associated
measure-valued process called the exploration process, which plays a key role
in most applications. Under suitable assumptions, we prove that whenever a
sequence of rescaled Galton-Watson processes converges in distribution, their
genealogies also converge to the continuous branching structure coded by the
appropriate height process. We apply this invariance principle to various
asymptotics for Galton-Watson trees. We then use the duality properties of the
exploration process to compute explicitly the distribution of the reduced tree
associated with Poissonnian marks in the height process, and the
finite-dimensional marginals of the so-called stable continuous tree. This last
calculation generalizes to the stable case a result of Aldous for the Brownian
continuum random tree. Finally, we combine the genealogical structure with an
independent spatial motion to develop a new approach to superprocesses with a
general branching mechanism. In this setting, we derive certain explicit
distributions, such as the law of the spatial reduced tree in a domain,
consisting of the collection of all historical paths that hit the boundary.