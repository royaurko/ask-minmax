For a general set transformation ${\cal R}$ between two measure spaces, we
define the rearrangement of a measurable function by means of the Layer's cake
formula. We study some functional properties of the Lorentz spaces defined in
terms of ${\cal R}$, giving a unified approach to the classical rearrangement,
Steiner's symmetrization, the multidimensional case, and the discrete setting
of trees.